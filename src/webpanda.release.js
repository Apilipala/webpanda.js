/**
 * webpanda.js is JavaScript framework for building project on the web.
 * Copyright (c) 1992-2052, Apilipala. (MIT Licensed)
 * a@apilipala.com 
 * QQ1102119280
 * https://github.com/Apilipala/webpanda.js
 */
(function(F,H,ia,ma){function O(a){return"object"!=typeof a||null===a||a.constructor!=Array?!1:!0}function D(a){return"object"!=typeof a||null===a||a.constructor!=Object?!1:!0}function P(a){return"string"!=typeof a||null===a?!1:!0}function ba(a){return"number"!=typeof a||isNaN(a)||null===a?!1:!0}function K(a){return"number"!=typeof a&&"string"!=typeof a||isNaN(a)||null===a?!1:/^[0-9]+$|^[0-9]+\.[0-9]+$/.test(a)}function V(a){return/^\s{0,}$/.test(a)}function I(a){if(O(a))for(var b=[],c=0;c<a.length;c++)O(a[c])||
D(a[c])?b.push(I(a[c])):b.push(a[c]);else if(D(a))for(c in b={},a)O(a[c])||D(a[c])?b[c]=I(a[c]):b[c]=a[c];else b=a;return b}function C(a){P(a)&&(a="function"==typeof a.trim?a.trim():a.replace(/(^\s+)|(\s+$)/g,""));return a}function L(a){if(0==arguments.length)return null;if("string"!=typeof a)return a;var b=H.createElement("DIV");b.innerText?b.innerText=a:b.textContent=a;b=b.innerHTML;return b=b.replace(/'/g,"&apos;").replace(/"/g,"&quot;")}function W(a){if(0==arguments.length)return null;if("string"!=
typeof a)return a;var b=H.createElement("DIV");b.innerHTML=a;return b.innerText||b.textContent}function U(a){if(0!=arguments.length){if(!a)return a;if(O(a)){for(var b=[],c=0;c<a.length;c++)b[c]=U(a[c]);return b}if(D(a)){b={};for(c in a)b[U(c)]=U(a[c]);return b}return P(a)?encodeURIComponent(a):a}}function X(a){if(0!=arguments.length){if(!a)return a;if(O(a)){for(var b=[],c=0;c<a.length;c++)b[c]=X(a[c]);return b}if(D(a)){b={};for(c in a)b[X(c)]=X(a[c]);return b}return P(a)?decodeURIComponent(a):a}}
function ja(a){var b=void 0;if("object"==typeof a&&a instanceof HTMLElement)b=a;else if("string"==typeof a||"number"==typeof a)try{var c=H.querySelectorAll(a);c.length&&c[0]&&(b=c[0])}catch(d){}return b}function na(a,b,c){"function"==typeof a.addEventListener?(a.addEventListener(b,c,!1),a.removeEventListener(b,c,!0)):"function"==typeof a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}function oa(a,b,c){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,!1):"function"==typeof a.detachEvent?
a.detachEvent("on"+b,c):a["on"+b]=null}function M(a,b){Object.defineProperty(this,"index",{value:k.createIndex(k.option.abstractNodeTree),writable:!1,configurable:!1});this.selector=this.debug=void 0;this.node=null;this.nodeType=this.nodeName="";this.parent=b;this.children=[];this.compiler=a;this.bind=void 0;this.tagRightAfterIndex=this.tagRightBeforeIndex=this.tagLeftAfterIndex=this.tagLeftBeforeIndex=this.templateIndex=-1;this.tagInner=this.tagRight=this.tagLeft="";this.tagLength=0;this.command=
{};this.commandTemplate={};this.commandBuffer={};this.attribute={};this.attributeTemplate={};this.eventListener={};this.renderFunction=void 0;this.option=0}function p(a,b,c,d){c=c?c:0;for(var e=[];;){"number"==typeof b&&(b=String(b));if("string"!=typeof b||V(b))break;var f=new M(a,d);p.match(f,b,0);f.templateIndex=c;e=f.isTagError()?p.getTagError(e,f,b):p.getTagNotError(e,f,b);if((f.isTagSingle()||f.isTagError()&&0<=f.tagLeftAfterIndex)&&0<=f.tagLeftAfterIndex&&f.tagLeftAfterIndex<b.length)b=b.substr(f.tagLeftAfterIndex),
c=f.tagLeftAfterIndex+f.templateIndex;else if(0<=f.tagRightAfterIndex&&f.tagRightAfterIndex<b.length)b=b.substr(f.tagRightAfterIndex),c=f.tagRightAfterIndex+f.templateIndex;else if(0<=f.tagLeftBeforeIndex&&0>f.tagLeftAfterIndex&&f.tagLeftBeforeIndex+1<b.length)b=b.substr(f.tagLeftBeforeIndex+1),c=f.tagLeftBeforeIndex+1+f.templateIndex;else break}return e}function n(a){var b={compiler:a.compiler,abstractNodeTree:null,data:a.data,option:a.option,onlistener:a.onlistener,debug:a.debug,print:function(f){return"string"==
typeof f||"number"==typeof f?f:""},encodeHTML:function(f){return L(f)},decodeHTML:function(f){return W(f)},language:function(){return w.content.apply(w.content,arguments)},triggerError:function(f,g,m){return k.triggerError(f,W(g),m,k.option.templateError)},triggerWarning:function(f,g,m){return k.triggerWarning(f,W(g),m,k.option.templateWarning)},precompileParameter:function(f,g,m){g=g.toLowerCase();if("#this"==g)return f;if("#node"==g)return f.node;if("#template"==g)return f.getTemplateLocation().template;
if("#event"==g)return m||F.event;if("#stoppropagation"==g)(m=m||F.event)&&"object"==typeof m&&("function"==typeof m.stopPropagation?m.stopPropagation():m.cancelBubble=!0);else if("#preventdefault"==g)(m=m||F.event)&&"object"==typeof m&&(m.preventDefault?m.preventDefault():m.returnValue=!1);else{if("#html"==g)return f.node?f.node.innerHTML:"";if("#text"==g)return f.node?"undefined"!=typeof f.node.innerText?f.node.innerText:"undefined"!=typeof f.node.textContent?f.node.textContent:"":"";if("#value"==
g){if(f.node){if("select"==f.nodeName.toLowerCase()&&"element"==f.nodeType){if("undefined"==typeof f.node.options)return;if(f.node.multiple){m=[];g=f.node.options.length;for(var t=0;t<g;t++)f.node.options[t].selected&&m.push(f.node.options[t].value);return m}m=f.node.options.selectedIndex;return 0>m||"undefined"==typeof f.node.options[m]?"":f.node.options[m].value}if("undefined"!=typeof f.node.value)return f.node.value}}else if("#window"==g)return F}}},c=null;a.selector&&null!==a.selector&&(c="object"!=
typeof a.selector||a.selector.constructor!=Array&&a.selector.constructor!=M?ja(a.selector):a.selector);c||(c=a.compiler.node);for(var d=n.setting({group:a.compiler.abstractNodeTree}),e=0;e<a.compiler.abstractNodeTree.length;e++)d.index=e,n.node(c,a.compiler.abstractNodeTree[e],b,d);return c}function ka(a,b){Object.defineProperty(this,"length",{value:a,writable:!0,enumerable:!1});Object.defineProperty(this,"handler",{value:{},writable:!0,enumerable:!1});Object.defineProperty(this,"global",{value:{},
writable:!0,enumerable:!1});Object.defineProperty(this,"compiler",{value:b,writable:!0,enumerable:!1})}function R(a){a&&"object"==typeof a||(a={});Object.defineProperty(this,"index",{value:k.createIndex(k.option.compiler),writable:!1,enumerable:!0,configurable:!1});var b="";"undefined"!=typeof a.template&&(b=a.template,"number"==typeof b&&(b=String(b)),"string"!=typeof b&&(b=""));Object.defineProperty(this,"template",{value:b,writable:!0,enumerable:!0,configurable:!1});Object.defineProperty(this,
"node",{value:H.createElement("render"),writable:!1,enumerable:!0,configurable:!1});P(a.option)&&K(a.option)?this.option=parseInt(a.option):ba(a.option)?this.option=a.option:this.option=0;this.debug="string"==typeof a.debug||"number"==typeof a.debug?a.debug:void 0;this.parent=a.parent&&"object"==typeof a.parent&&a.parent.constructor==R?a.parent:void 0;this.parentAbstractNodeTree=a.parentAbstractNodeTree&&"object"==typeof a.parentAbstractNodeTree&&a.parentAbstractNodeTree.constructor==M?a.parentAbstractNodeTree:
void 0;this.status=!1;this.abstractNodeTree=k.parse(this)}function k(a){return new R(a)}function S(){this.domain=this.password=this.user=this.protocol="";this.port=-1;this.path=[];this.query={};this.hashPath=[];this.hashQuery={};this.absoluteStatus=this.fileStatus=this.hashStatus=!1}function r(a){var b=new S;0==arguments.length?r.parse(b,F.location.href):r.parse(b,a);return b}function Y(){this.url=this.node=void 0;this.charset="UTF-8";this.selector="head";this.option=0}function A(a){var b=new Y;A.initialize(b,
a);return b}function Z(){this.XMLHttpRequest=void 0;this.method="GET";this.url="";this.password=this.user=null;this.option=0;this.data=null;this.header={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"};this.timeout=void 0}function E(a){var b=new Z;a&&"object"==typeof a&&E.initialize(b,a);return b}function la(){this.nextLength=this.lastLength=this.forwardLength=this.backLength=0}function ca(a){this.title=H.title;this.url=r(a);this.step=[r(a)];this.index=0}function x(a,b){"undefined"==
typeof x.current?x.current=new ca(a):"function"==typeof x.callback?(x.callback(),x.clear()):b?x.setPage(new ca(a),!1):x.setStep(a)}function q(){if("undefined"!=typeof q.intervalId)return!1;var a=r(),b=!1;q.intervalId=setInterval(function(){b||(b=!0,N(function(){var c=r();if(!u.router.isDisablePage()){if(u.router.isModeHistory())var d=!0,e=a.toString(r.option.path),f=c.toString(r.option.path);else d=!1,e=a.toString(r.option.hashPath),f=c.toString(r.option.hashPath);if(e!==f){q.triggerPage("onpagechange",
c,void 0,void 0,function(){a=c;b=!1;l()},function(){d?F.history.pushState(null,"",a.toString()):(a.hashStatus=!0,F.location.assign(a.toString()));x.clear();b=!1});return}}e=c.toString();a.toString()!==e?(x(e,!1),a=c,b=!1,q.triggerUrl("onurlchange",c)):b=!1}))},0)}function N(a){N.list.push(a);N.interval()}function da(a,b,c,d){this.index=z.createIndex();this.global=!!d;this.callback=a;this.timeout=b;this.limit=c;this.executed=0;this.executing=!1;this.origin=Date.now();this.runtime=l.runtime}function z(a,
b,c,d){if("function"==typeof a)return b=parseInt(b),c=parseInt(c),isNaN(b)&&(b=0),isNaN(c)&&(c=0),new da(a,b,c,d)}function l(a,b){var c=r();q.triggerPage("onpagedestroy",c,a);if(l.project){var d=h.structs[l.project.index];d.compiler&&(d.compiler.option|=k.option.disableRender)}l.runtime=(new Date).valueOf();l.project=void 0;l.url=void 0;l.firstStatus=b?!0:!1;l.status=!1;z.clear();l.before(a,c)}function ea(a,b,c){Object.defineProperty(this,"index",{value:h.createIndex(h.option.include),writable:!1,
configurable:!1});this.result=void 0;this.option=c;this.location=a;this.wait=[];this.handle=c&h.option.js||c&h.option.css?A({url:b,option:c&h.option.js?A.option.js:A.option.css}):E({url:b,method:"GET",option:E.option.async|(c&h.option.json?E.option.responseJson:E.option.responseText)})}function aa(){}function h(a,b,c){if("object"!=typeof a)return h.find(a,b,c);if(a)return"string"!=typeof a.name&&"number"!=typeof a.name&&(a.name=h.createName()),"undefined"==typeof h.projects[a.name]?h.create(a.name,
a):h.triggerError("create",w.content("project-0005",a.name)),h.projects[a.name]}function fa(){this.option=u.option;this.version=ma;this.author=ia;this.js="webpanda.js v"+ma+" \u662f\u7528\u4e8e\u5728 web \u4e0a\u6784\u5efa\u9879\u76ee, \u57fa\u4e8e ECMAScript 5 \u7279\u6027\u7684\u5355\u9875\u5e94\u7528\uff08SPA\uff09 JavaScript \u6846\u67b6!";this.config=function(b){b&&"object"==typeof b&&u.configuration(this,b)};this.ready=function(b,c){"function"==typeof b&&u.wait(b,c)};this.language=function(){return w.apply(w,
arguments)};this.compiler=function(){return k.apply(k,arguments)};this.compiler.option=k.option;this.compiler.isInstanceOf=function(b){return!!(b&&"object"==typeof b&&b instanceof R)};this.url=function(){return r.apply(r,arguments)};this.url.option=r.option;this.url.isInstanceOf=function(b){return!!(b&&"object"==typeof b&&b instanceof S)};this.encodeURL=function(b){return U(b)};this.decodeURL=function(b){return X(b)};this.encodeQuery=function(b){return r.buildQuery(b)};this.decodeQuery=function(b){return r.parseQuery(b)};
this.encodeHTML=function(b){return L(b)};this.decodeHTML=function(b){return W(b)};this.require=function(){return A.apply(A,arguments)};this.require.option=A.option;this.require.isInstanceOf=function(b){return!!(b&&"object"==typeof b&&b instanceof Y)};this.ajax=function(){return E.apply(E,arguments)};this.ajax.option=E.option;this.ajax.isInstanceOf=function(b){return!!(b&&"object"==typeof b&&b instanceof Z)};this.project=function(){return h.apply(h,arguments)};this.project.option=h.option;this.project.isInstanceOf=
function(b){return!!(b&&"object"==typeof b&&b instanceof aa&&h.status(b))};this.include=function(b){return h.include(l.project,b)};this.timer=function(){return z.apply(z,arguments)};this.timer.isInstanceOf=function(b){return!!(b&&"object"==typeof b&&b instanceof da)};this.history=x.instance;this.env=u.environmentVariable;this.getPageRuntime=function(){return l.runtime};this.getPageFirstStatus=function(){return l.firstStatus};this.getPageProject=function(){return l.project};this.getPageUrl=function(){return l.url};
this.getProjectAll=function(){return h.projects};this.getIncludeAll=function(){return h.includes};this.execute=function(){q();u.router.isDisablePage()||l(void 0,!0);u.executed=!0;return this};this.debug=function(){console.log(h.prepares);console.log(u);return this};for(var a in this)"constructor"!==a&&Object.defineProperty(this,a,{value:this[a],writable:!1,enumerable:!0,configurable:!1});this.onrenderlistener=this.onrenderstop=this.onrenderpause=this.onrenderstart=this.onrendered=this.onrender=this.onexecutestop=
this.onexecutepause=this.onexecutestart=this.onexecuted=this.onexecute=this.onurlchange=this.onpagedestroy=this.onpagechange=this.onpaged=this.onreadied=this.onready=this.onpageprogress=this.onpagenotfound=this.onpage=this.onprojected=this.onproject=this.onincluded=this.oninclude=null;for(a in q.native)this[a]=null;Object.preventExtensions(this)}function u(){}function ha(){this["compiler-0001"]="\u9519\u8bef\u547d\u4ee4";this["compiler-0002"]="\u6a21\u677f\u5185\u5bb9";this["compiler-0003"]="\u8b66\u544a\u547d\u4ee4";
this["compiler-0004"]="\u6a21\u677f\u5185\u5bb9";this["compiler-0005"]="\u8c03\u8bd5\u6807\u8bb0";this["parse-0001"]="\u201c${1}\u201d \u547d\u4ee4\u4e0d\u80fd\u5728\u540c\u4e00\u4e2a\u6807\u7b7e\u4e2d\u540c\u65f6\u5b58\u5728\u6216\u5b58\u5728\u591a\u4e2a!";this["parse-0002"]="\u201c${1}\u201d \u547d\u4ee4\u4e0d\u80fd\u5728\u540c\u4e00\u4e2a\u6807\u7b7e\u4e2d\u5b58\u5728\u591a\u4e2a!";this["parse-0003"]="\u201c${1}\u201d \u547d\u4ee4\u4e0d\u80fd\u4e3a\u7a7a!";this["parse-0004"]="\u201c${1}\u201d \u6a21\u677f\u8bed\u6cd5\u9519\u8bef!";
this["parse-0005"]="\u201c${1}\u201d \u547d\u4ee4\u4e0d\u5408\u6cd5, \u7f3a\u5c11\u5c5e\u6027\u540d\u79f0!";this["parse-0006"]="\u201c${1}\u201d \u547d\u4ee4\u4e0d\u5408\u6cd5, \u7f3a\u5c11\u7c7b\u540d\u79f0!";this["parse-0007"]="\u201c${1}\u201d \u547d\u4ee4\u4e0d\u5408\u6cd5, \u7f3a\u5c11\u6837\u5f0f\u952e\u540d\u79f0!";this["parse-0008"]="\u201c${1}\u201d \u547d\u4ee4\u7f3a\u5c11\u4e8b\u4ef6\u540d\u79f0!";this["parse-0009"]="\u201c${1}\u201d \u547d\u4ee4\u8bed\u6cd5\u9519\u8bef, \u201celseif | else\u201d \u547d\u4ee4\u4e4b\u524d\u7684\u8282\u70b9\u5fc5\u987b\u5b58\u5728 \u201cif\u201d, \u201celse\u201d \u547d\u4ee4\u4e4b\u524d\u7684\u8282\u70b9\u5fc5\u987b\u5b58\u5728 \u201celseif | if\u201d \u547d\u4ee4";
this["render-0001"]="\u6e32\u67d3\u51fa\u9519, \u201c${1}\u201d \u662f\u6e32\u67d3\u6570\u636e\u7684\u5c5e\u6027, \u4e0d\u80fd\u5b9a\u4e49\u4e3a\u904d\u5386\u5355\u5143\u952e\u7684\u522b\u540d\u79f0!";this["render-0002"]="\u6e32\u67d3\u51fa\u9519, \u201c${1}\u201d \u662f\u6e32\u67d3\u6570\u636e\u7684\u5c5e\u6027, \u4e0d\u80fd\u5b9a\u4e49\u4e3a\u904d\u5386\u5355\u5143\u503c\u7684\u522b\u540d\u79f0!";this["render-0003"]="\u6e32\u67d3\u51fa\u9519, \u201c${1}\u201d \u662f\u6e32\u67d3\u6570\u636e\u7684\u5c5e\u6027, \u4e0d\u80fd\u5b9a\u4e49\u4e3a\u904d\u5386\u5355\u5143\u7d22\u5f15\u7684\u522b\u540d\u79f0!";
this["render-0004"]="\u6e32\u67d3\u51fa\u9519, \u201c${1}\u201d \u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61!";this["render-0005"]="\u6e32\u67d3\u51fa\u9519, \u201c${1}\u201d \u4e0d\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32!";this["render-0006"]="\u6e32\u67d3\u51fa\u9519, \u9009\u62e9\u5668\u662f\u4e00\u4e2a\u62bd\u8c61\u8282\u70b9\u6811\uff0c\u672a\u627e\u5230\u53ef\u6e32\u67d3\u6709\u6548\u8282\u70b9!";this["ajax-0001"]="\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Ajax!";this["page-0001"]="\u201c${1}\u201d \u9875\u9762\u4e0d\u5b58\u5728!";
this["page-0002"]="\u5de5\u7a0b\u540d\u79f0\u4e3a \u201c${1}\u201d \u7684\u9875\u9762\u4e0d\u5b58\u5728!";this["page-0003"]="\u9875\u9762\u52a0\u8f7d\u88ab\u7ec8\u6b62, \u201c${1}\u201d \u5de5\u7a0b\u521b\u5efa\u5f15\u5165\u8d44\u6e90\u5931\u6548!";this["page-0004"]="\u5de5\u7a0b\u540d\u79f0\u4e3a \u201c${1}\u201d \u7684\u9875\u9762, \u5de5\u7a0b\u6587\u4ef6 \u201c${2}\u201d \u52a0\u8f7d\u5931\u8d25!";this["page-0005"]="\u9632\u6b62\u66b4\u529b\u5237\u65b0, \u9875\u9762\u5b88\u62a4\u542f\u52a8!......\u66f4\u591a\u6280\u672f\u652f\u6301\uff1a${1}";
this["project-0001"]="${1} \u201c${2}\u201d \u6587\u4ef6\u5f15\u5165\u5931\u8d25, \u6846\u67b6\u7684\u5305\u542b\u7b5b\u9009\u5668 includeSelector \u201c${3}\u201d \u914d\u7f6e\u4e0d\u5408\u6cd5!";this["project-0002"]="${1} \u201c${2}\u201d \u6587\u4ef6\u5f15\u5165\u5931\u8d25, \u6846\u67b6\u7684\u5305\u542b\u65b9\u6cd5 includeMethod \u201c${3}\u201d \u914d\u7f6e\u4e0d\u5408\u6cd5!\u53ef\u9009\u503c: \u201cprepend | append\u201d";this["project-0003"]="${1} \u201c${2}\u201d \u6587\u4ef6\u5f15\u5165\u5f02\u5e38!";
this["project-0004"]="\u5de5\u7a0b\u521d\u59cb\u5316\u51fa\u9519, \u201c${1}\u201d \u5de5\u7a0b \u4e0e \u201c${2}\u201d \u5de5\u7a0b\u4e4b\u95f4\u5b58\u5728\u4e92\u76f8\u7ee7\u627f\u5173\u7cfb, \u4ee5\u81f4\u5de5\u7a0b\u51c6\u5907\u5b58\u5728\u7f3a\u9677!";this["project-0005"]="\u201c${1}\u201d \u5de5\u7a0b\u5df2\u7ecf\u5b58\u5728, \u5de5\u7a0b\u91cd\u590d\u5b9a\u4e49\u88ab\u963b\u6b62!";this["project-0006"]="\u201c${1}\u201d \u5de5\u7a0b\u7684\u7b5b\u9009\u5668 \u201c${2}\u201d \u914d\u7f6e\u4e0d\u5408\u6cd5, \u521b\u5efa\u6e32\u67d3\u7b5b\u9009\u8282\u70b9\u5931\u8d25!";
this["project-0007"]="\u5de5\u7a0b \u201c${1}\u201d \u7ee7\u627f\u7236\u7ea7\u5de5\u7a0b \u201c${2}\u201d \u5931\u8d25, \u7236\u7ea7\u5de5\u7a0b\u4e0d\u5b58\u5728!";this["project-0008"]="\u5de5\u7a0b\u540d\u79f0: ${1} "}function w(a){w.instance=new ha;for(var b in a)"undefined"!=typeof w.instance[b]&&typeof a[b]==typeof w.instance[b]&&(w.instance[b]=a[b])}M.prototype={constructor:M,getTemplateLocation:function(){var a={template:"",start:0,length:0};a.start=0<this.tagLeftBeforeIndex?this.templateIndex+
this.tagLeftBeforeIndex:this.templateIndex;this.isTagText()||this.isTagSingle()?a.length=this.tagLength:this.isTagError()?a.length=this.tagLeftAfterIndex-this.tagLeftBeforeIndex:a.length=this.tagRightAfterIndex-this.tagLeftBeforeIndex;a.template=this.compiler.template.substr(a.start,a.length);return a},isTagError:function(){return!!(this.option&k.option.tagError)},isTagSingle:function(){return!!(this.option&k.option.tagSingle)},isTagComment:function(){return!!(this.option&k.option.tagComment)},isTagText:function(){return!!(this.option&
k.option.tagText)},isTagElement:function(){return"element"==this.nodeType},isVoid:function(){return this.option&k.option.nodeVoid||"webpanda"==this.nodeName.toLowerCase()||this.command&&this.command["for"]?!0:!1},isNodeScript:function(){return"script"==this.nodeName.toLowerCase()&&"element"==this.nodeType?!0:!1},isNodeStylesheet:function(){return"style"==this.nodeName.toLowerCase()&&"element"==this.nodeType?!0:!1},isNodeTextarea:function(){return"textarea"==this.nodeName.toLowerCase()&&"element"==
this.nodeType?!0:!1},isNodeSvg:function(){return"svg"==this.nodeName.toLowerCase()&&"element"==this.nodeType?!0:!1},isCommand:function(){return!(this.compiler.option&k.option.disableCommand)},isRender:function(){return this.isDeleted()||this.isCommandError()||this.compiler.option&k.option.disableRender||this.compiler.parent&&this.compiler.parent.option&k.option.disableRender||"object"==typeof this.commandBuffer.parentDisableRender&&0<Object.keys(this.commandBuffer.parentDisableRender).length?!1:!0},
isListener:function(){return this.isDeleted()||this.compiler.option&k.option.disableListener&&(!this.compiler.parent||this.compiler.parent.option&k.option.disableListener)?!1:!0},isCommandError:function(){return!!(this.option&k.option.commandError)},isCommandWarning:function(){return!!(this.option&k.option.commandWarning)},isError:function(){return this.option&k.option.templateError||this.option&k.option.commandError?(this.clear(),!0):!1},isDeleted:function(){return!!(this.option&k.option.deleted)},
isCompiler:function(a){return a?this.compiler==a||a.parent&&this.compiler==a.parent||this.compiler.parent&&this.compiler.parent==a||this.compiler.parent&&a.parent&&this.compiler.parent==a.parent?!0:!1:!1},clear:function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node);var a=[];this.isVoid()&&this.children&&this.children.length&&(a=a.concat(this.children));this.bind&&this.bind.abstractNodeTree&&this.bind.abstractNodeTree.length&&(a=a.concat(this.bind.abstractNodeTree));
if(a.length&&(a=k.queryValidAbstractNodeTrees(a))&&a.length)for(var b=0;b<a.length;b++)try{a[b].node&&a[b].node.parentNode&&a[b].node.parentNode.removeChild(a[b].node)}catch(c){console.warn(c,this)}},remove:function(){for(var a=[this],b;a.length;)if(b=a.pop(),b.node&&b.node.parentNode&&b.node.parentNode.removeChild(b.node),b.option|=k.option.deleted,b.children&&b.children.length&&(a=a.concat(b.children)),b.bind&&b.bind.abstractNodeTree){b=b.bind.abstractNodeTree;for(var c in b)b[c].clear()}},removeChild:function(a){a=
parseInt(a);isNaN(a)&&(a=0);for(var b=0,c=a;c<this.children.length;c++)this.children[c].remove(),b++;0<b&&this.children.splice(a,b)},clearChild:function(a){a=parseInt(a);isNaN(a)&&(a=0);for(var b=0;a<this.children.length;a++)this.children[a].clear(),b++},createNode:function(){if(this.isTagComment())this.node=H.createComment(this.tagInner);else if(this.isTagText()){var a=F.ActiveXObject||"ActiveXObject"in F?this.tagInner.replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"):this.tagInner;this.node=H.createTextNode(W(a))}else if("element"==
this.nodeType)for(a in this.isNodeSvg()?this.node=H.createElementNS("string"==typeof this.attribute.xmlns?this.attribute.xmlns:"http://www.w3.org/2000/svg","svg"):this.node=H.createElement(this.nodeName),this.attribute)try{this.node.setAttribute(a,this.attribute[a])}catch(b){k.triggerWarning(this,a,b,k.option.templateWarning)}else return!1;return!0}};p.getTagError=function(a,b,c){0>b.tagLeftBeforeIndex?V(c)||(a=a.concat(p.createTextNode(b,c))):0<=b.tagLeftBeforeIndex&&0>b.tagLeftAfterIndex?(c=c.substr(0,
b.tagLeftBeforeIndex+1),V(c)||(a=a.concat(p.createTextNode(b,c)))):0<=b.tagLeftAfterIndex&&(c=c.substr(0,b.tagLeftAfterIndex),V(c)||(a=a.concat(p.createTextNode(b,c))));return a};p.getTagNotError=function(a,b,c){c=c.substr(0,b.tagLeftBeforeIndex);if(!V(c)){var d=new M(b.compiler,b.parent);d.templateIndex=b.templateIndex;a=a.concat(p.createTextNode(d,c))}b.isTagComment()?a.push(p.createComment(b)):b.isTagSingle()?a.push(p.createElement(b)):(b=p.createElement(b),b&&b.command&&(b.command["for"]||b.command.template||
b.command.fragment)||(c=b.command&&b.command.print?p.createPrintNode(b):p(b.compiler,b.tagInner,b.tagLeftAfterIndex+b.templateIndex,b),"object"==typeof c&&(b.children=b.children.concat(c))),a.push(b));return a};p.filter=function(a,b){if(!P(a)||""===a)return a;var c=(new Date).valueOf(),d="#__FILTER_REPLACE_SINGLE_QUOTES_"+c+"__",e="#__FILTER_REPLACE_DOUBLE_QUOTES_"+c+"__";var f=a.replace(/\\'/g,d);f=f.replace(/\\"/g,e);a=0;c="#__FILTER_REPLACE_STRING_"+c+"_";for(var g=[];;){a++;var m=c+a+"__",t=/"([^"]{0,})"/g,
v=/'([^']{0,})'/g.exec(f);v||(v=t.exec(f));if(!v)break;g.push({regexp:m,replacement:v[0]});t=f.substr(0,v.index);f=f.substr(v.index+v[0].length,v.input.length-(v.index+v[0].length));f=t+m+f}return b(f,g,d,e)};p.filterRecover=function(a,b,c,d){for(var e=b.length-1;0<=e;e--)a=a.replace(new RegExp(b[e].regexp,"g"),b[e].replacement);b=new RegExp(d,"g");a=a.replace(new RegExp(c,"g"),"\\'");return a=a.replace(b,'"')};p.match=function(a,b,c){if(!a.isCommand())return a.tagLeftBeforeIndex=b.indexOf("<",c),
p.matchTag(a,b);c=c?b.substr(c):b;var d=/(\/\*\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]|<!\-\-\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]|\/\*\s{0,}\*\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]|<!\-\-\s{0,}\-\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]|<)/i.exec(c);if(d){a.tagLeftBeforeIndex=d.index;if("<"==d[1])return p.matchTag(a,b);if(/\/\*\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]/i.test(d[1]))return p.matchFragment(a,c,{single:!0,length:d[1].length,leftAfter:/\*\//});if(/<!\-\-\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]/i.test(d[1]))return p.matchFragment(a,
c,{single:!0,length:d[1].length,leftAfter:/\-\->/});if(/\/\*\s{0,}\*\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]/i.test(d[1]))return p.matchFragment(a,c,{length:d[1].length,leftBeforeGlobal:/\/\*\s{0,}\*\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]/ig,leftAfter:/\*\s{0,}\*\//,right:/\/\*\s{0,}\*\s{0,}\[\s{0,}\[\s{0,}\/\s{0,}webpanda\s{0,}\]\s{0,}\]\s{0,}\*\s{0,}\*\//i,rightGlobal:/\/\*\s{0,}\*\s{0,}\[\s{0,}\[\s{0,}\/\s{0,}webpanda\s{0,}\]\s{0,}\]\s{0,}\*\s{0,}\*\//ig});if(/<!\-\-\s{0,}\-\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]/i.test(d[1]))return p.matchFragment(a,
c,{length:d[1].length,leftBeforeGlobal:/<!\-\-\s{0,}\-\s{0,}\[\s{0,}\[\s{0,}webpanda\s{0,}\]\s{0,}\]/ig,leftAfter:/\-\s{0,}\-\->/,right:/<!\-\-\s{0,}\-\s{0,}\[\s{0,}\[\s{0,}\/\s{0,}webpanda\s{0,}\]\s{0,}\]\s{0,}\-\s{0,}\-\->/i,rightGlobal:/<!\-\-\s{0,}\-\s{0,}\[\s{0,}\[\s{0,}\/\s{0,}webpanda\s{0,}\]\s{0,}\]\s{0,}\-\s{0,}\-\->/ig})}a.tagLeftBeforeIndex=-1;a.option|=k.option.tagError;return a};p.matchFragment=function(a,b,c){b=b.substr(a.tagLeftBeforeIndex);var d=c.leftAfter.exec(b);if(d){var e=d.index+
d[0].length;a.tagLeftAfterIndex=a.tagLeftBeforeIndex+e;d=b.substr(c.length,d.index-c.length);a.tagLeft="<webpanda "+C(d)+" >";b=b.substr(e)}else return a.option|=k.option.tagError,a;a.nodeName="webpanda";if(c.single)return a.tagLength=a.tagLeftAfterIndex-a.tagLeftBeforeIndex,a.option|=k.option.tagSingle,a;e=b;d=0;do{var f=c.right.exec(e);if(!f)break;d+=f.index;var g=b.substr(0,d),m=g.match(c.leftBeforeGlobal);g=g.match(c.rightGlobal);if(!g&&!m||g&&m&&g.length==m.length){a.tagRightBeforeIndex=a.tagLeftAfterIndex+
d;a.tagRightAfterIndex=a.tagRightBeforeIndex+f[0].length;a.tagRight="</webpanda>";a.tagInner=b.substr(0,d);a.tagLength=f[0].length;break}e=e.substr(f.index+f[0].length);d+=f[0].length}while(1);if(0>a.tagRightBeforeIndex)return a.option|=k.option.tagError,a};p.matchTag=function(a,b){if("\x3c!--"==b.substr(a.tagLeftBeforeIndex,4)){a.tagLeftAfterIndex=a.tagLeftBeforeIndex+4;a.tagRightBeforeIndex=b.indexOf("--\x3e",a.tagLeftBeforeIndex);if(0>a.tagRightBeforeIndex)return a.option|=k.option.tagError,a;
a.tagRightAfterIndex=a.tagRightBeforeIndex+3;a.option|=k.option.tagComment;a.tagInner=b.substr(a.tagLeftAfterIndex,a.tagRightBeforeIndex-a.tagLeftAfterIndex);a.tagLength=a.tagRightAfterIndex-a.tagLeftBeforeIndex;return a}var c=a.tagLeftBeforeIndex;do{c=b.indexOf(">",c);if(0>c)break;var d=b.substr(a.tagLeftBeforeIndex,c-a.tagLeftBeforeIndex),e=(new Date).valueOf(),f="__REPLACE_ESCAPE_SINGLE_QUOTES_"+e+"__",g="__REPLACE_ESCAPE_DOUBLE_QUOTES_"+e+"__",m="__REPLACE_SINGLE_QUOTES_"+e+"__",t="__REPLACE_DOUBLE_QUOTES_"+
e+"__";d=d.replace(/\\'/g,f);d=d.replace(/\\"/g,g);d=d.replace(/'([^']{0,})'/g,m);d=d.replace(/"([^"]{0,})"/g,t);var v=d.match(/'/g),y=d.match(/"/g);if(!v&&!y){a.tagLeftAfterIndex=c+1;break}c+=1}while(1);if(0>a.tagLeftAfterIndex)return a.option|=k.option.tagError,a;a.tagLeft=b.substr(a.tagLeftBeforeIndex,a.tagLeftAfterIndex-a.tagLeftBeforeIndex);if(c=/^<\s{0,}([^<>\s\/]+)/.exec(a.tagLeft))a.nodeName=c[1];if(""==a.nodeName||!/^[\w\d\-_]+$/.test(a.nodeName))return a.nodeName="",a.option|=k.option.tagError,
a;if(a.tagLeft.match(/\/\s{0,}>$/))return a.tagLength=a.tagLeftAfterIndex-a.tagLeftBeforeIndex,a.option|=k.option.tagSingle,a;v="</"+a.nodeName;c=a.nodeName.replace("-","\\-");y=new RegExp("(\\<"+c+"\\s{1,}|\\<"+c+"\\s{0,}\\>)","g");var G=new RegExp("\\<\\/"+c+"\\s{0,}\\>","g"),T=new RegExp("\\<"+c+"\\s{0,}([^\\<\\>]+)?\\/\\s{0,}\\>","g"),Q=a.tagLeftAfterIndex;do{c=b.indexOf(v,Q);if(0>c)break;Q=c+v.length;var J=b.indexOf(">",c);if(!(0>J)&&(d=b.substr(c,J-c+1),d=d.replace(/\s+/g,""),v+">"===d&&(d=
b.substr(a.tagLeftAfterIndex,c-a.tagLeftAfterIndex),e=(new Date).valueOf(),f="__REPLACE_ESCAPE_SINGLE_QUOTES"+e+"__",g="__REPLACE_ESCAPE_DOUBLE_QUOTES"+e+"__",m="__REPLACE_SINGLE_QUOTES"+e+"__",t="__REPLACE_DOUBLE_QUOTES"+e+"__",e="__REPLACE_LABEL"+e+"__",d=d.replace(/\\'/g,f),d=d.replace(/\\"/g,g),d=d.replace(/'([^']{0,})'/g,m),d=d.replace(/"([^"]{0,})"/g,t),d=d.replace(T,e),f=d.match(y),d=d.match(G),!d&&!f||d&&f&&d.length==f.length))){a.tagRightBeforeIndex=c;a.tagRightAfterIndex=J+1;break}}while(1);
if(0>a.tagRightBeforeIndex)return a.tagLength=a.tagLeftAfterIndex-a.tagLeftBeforeIndex,a.option|=k.option.tagSingle,a;a.tagRight=b.substr(a.tagRightBeforeIndex,a.tagRightAfterIndex-a.tagRightBeforeIndex);a.tagInner=b.substr(a.tagLeftAfterIndex,a.tagRightBeforeIndex-a.tagLeftAfterIndex);a.tagLength=a.tagRightAfterIndex-a.tagLeftBeforeIndex};p.createComment=function(a){a.nodeType="comment";a.option|=k.option.tagComment;return a};p.createPrintNode=function(a){if(""==a.tagInner)return!1;if(a.attributeTemplate["webpanda-text"]){var b=
new M(a.compiler,a);b.templateIndex=a.tagLeftAfterIndex+a.templateIndex;b.option|=k.option.tagText;b.tagLength=a.tagInner.length;b.nodeType="text";b.tagInner=L(a.tagInner);return Array(b)}return a.attributeTemplate["webpanda-html"]?(new R({template:a.tagInner,debug:a.compiler.debug,option:k.option.disableCommand,parent:a.compiler,parentAbstractNodeTree:a})).abstractNodeTree:!1};p.createTextNode=function(a,b){var c=[];if(!a.isCommand())return V(b)||(a.option|=k.option.tagText,a.tagInner=b,a.tagLength=
b.length,a.nodeType="text",c.push(a)),c;for(var d=/\{\s{0,}\{([^\}\{]{1,})\}\s{0,}\}|\$\{([^\}\{}]{1,})\}|(webpanda\-data|\-data)\s{0,}\(([^\)\(]{1,})\s{0,}\)/,e=b,f,g;!a.isError();)if(f=d.exec(e)){if(0<f.index&&(g=new M(a.compiler,a.parent),g.templateIndex=a.templateIndex,g.option|=k.option.tagText,g.tagInner=e.substr(0,f.index),g.tagLength=b.length,g.nodeType="text",c.push(g)),g=new M(a.compiler,a.parent),g.templateIndex=a.templateIndex,g.option|=k.option.tagText,g.option|=k.option.nodeVoid,g.tagLength=
b.length,g.nodeType="text","undefined"!=typeof f[1]?(g.tagInner=f[1],p.createCommand(g,"{{}}",f[1],f[0])):"undefined"!=typeof f[2]?(g.tagInner=f[2],p.createCommand(g,"${}",f[2],f[0])):(g.tagInner=f[4],p.createCommand(g,"webpanda-data",f[4],f[0])),c.push(g),g=f.index+f[0].length,f=f.input.length-g,e=e.substr(g,f),!e||3>=e.length)break}else break;a.isError()||(!c.length||""==e)&&V(e)||(d=new M(a.compiler,a.parent),d.templateIndex=a.templateIndex,d.option|=k.option.tagText,d.tagInner=e,d.tagLength=b.length,
d.nodeType="text",c.push(d));return c};p.createElement=function(a){a.nodeType="element";if(!a.tagLeft)return a;p.filter(a.tagLeft,function(b,c,d,e){b=b.replace(/^(<\s{0,})/,"").replace(/(\s{0,}\/?\s{0,}>)$/,"");for(var f,g=!0;;){f=/([^\s]+\s{0,}=\s{0,}[^\s]+|[^\s]+)/.exec(b);if(!f)break;b=b.substr(f.index+f[0].length,f.input.length-f[0].length);if(g)g=!1;else{var m=f[1].split(/=/);if("undefined"==typeof m[1]){f="";var t=m=p.filterRecover(m[0],c,d,e)}else t=p.filterRecover(m[0],c,d,e),f=p.filterRecover(m[1],
c,d,e),m=t+"="+f,f=C(f),f=0===f.search(/"/)?f.replace(/(^"|"$)/g,""):f.replace(/(^'|'$)/g,"");p.createCommand(a,C(t),f,m)}}});return a};p.createCommand=function(a,b,c,d){if(a.isError())return!1;if(a.isCommand()){var e=b.toLowerCase().replace(/^\-/,"webpanda-").replace(/^webpanda\-\-/,"webpanda-attribute-");"webpanda-else-if"==e?e="webpanda-elseif":"webpanda-attr"==e?e="webpanda-attribute":0==e.indexOf("webpanda-attr-")&&(e=e.replace(/^webpanda\-attr\-/,"webpanda-attribute-"));d=C(d);"undefined"==
typeof a.attributeTemplate[e]&&(a.attributeTemplate[e]=[]);a.attributeTemplate[e].push(d);if("webpanda-if"==e||"webpanda-elseif"==e||"webpanda-else"==e)return p.commandIf(a,e,c,d);if("${}"==e)return p.commandPrint(a,e,c,d,!0);if("{{}}"==e)return p.commandPrint(a,e,c,d,!1);if("webpanda-data"==e)return p.commandPrintData(a,e,c,d);if("webpanda-text"==e)return p.commandPrintText(a,e,c,d);if("webpanda-html"==e)return p.commandPrintHtml(a,e,c,d);if("webpanda-for"==e)return p.commandFor(a,e,c,d);if("webpanda-is"==
e)return p.commandIs(a,e,c,d);if("webpanda-attribute"==e||0==e.indexOf("webpanda-attribute-"))return p.commandAttribute(a,e,c,d);if("webpanda-class"==e||0==e.indexOf("webpanda-class-"))return p.commandClass(a,e,c,d);if("webpanda-style"==e||0==e.indexOf("webpanda-style-"))return p.commandStyle(a,e,c,d);if(0==e.indexOf("webpanda-on"))return p.commandEvent(a,e,c,d);if("webpanda-template"==e)return p.commandTemplate(a,e,c,d);if("webpanda-fragment"==e)return p.commandFragment(a,e,c,d);if("webpanda-before"==
e)return p.commandBefore(a,e,c,d);if("webpanda-after"==e)return p.commandAfter(a,e,c,d);if(0==e.indexOf("webpanda-"))return k.triggerWarning(a,d,w.content("parse-0004",b),k.option.commandWarning)}a.attribute[b]=c;return!0};p.createFunction=function(a,b,c,d){try{var e=new Function("$callback","$event",c)}catch(f){d&k.option.templateWarning||d&k.option.commandWarning?k.triggerWarning(a,b,f,k.option.templateWarning|k.option.commandWarning):k.triggerError(a,b,f,k.option.templateError|k.option.commandError),
e=!1}return e};p.createParameter=function(a,b,c){return p.filter(b,function(d,e,f,g){d=p.withParameter(d,a);d=p.precompileParameter(d,a,c);return p.filterRecover(d,e,f,g)})};p.precompileParameter=function(a,b,c){return a.replace(/#\s{0,}([A-Za-z]+)/g,b+".precompileParameter("+b+".abstractNodeTree,'#$1',"+c+")")};p.withParameter=function(a,b){if(!a)return a;var c=/[\+\-\*\/=<>%&\|:\(\)\{\}\s\?!\^\[\],;@~`]{1,}/,d=a;for(a=[];;){var e=c.exec(d);if(e){e.index&&a.push(d.substr(0,e.index));a.push(e[0]);
var f=e.index+e[0].length;d=d.substr(f,e.input.length-f);if(!d)break}else break}""!=d&&a.push(d);d="if else new return typeof instanceof debugger false true null undefined".split(" ");e=[];for(f=0;f<a.length;f++){var g=a[f];/\{/.test(g)&&e.push({key:!1,arr:!1});/\}/.test(g)&&e.length&&e.pop();var m=void 0;e.length&&(m=e[e.length-1]);m&&(!m.arr&&/\[/.test(g)&&(m.arr=!0),/\]/.test(g)&&(m.arr=!1),!m.key&&/:/.test(g)&&(m.key=!0),!m.arr&&/,/.test(g)&&(m.key=!1));0===g.indexOf("#")||0===g.indexOf(".")||
c.test(g)||/^\d+$/.test(g)||-1<d.indexOf(g)||m&&!m.key||(a[f]=b+".data."+g)}return a.join("")};p.createPrintFunction=function(a,b,c,d,e){b="$_TEMPLATE_THIS_"+(new Date).valueOf()+"_";c=p.createParameter(b,c);var f="var "+b+"=this;\nreturn (function(){\n\t\t try{\n";f=(e?f+("\t\t\t return "+b+".print("+c+");\n"):f+("\t\t\t return "+b+".print("+b+".encodeHTML("+c+"));\n"))+"\t\t }catch(e){\n";f+="\t\t\t "+b+".triggerError("+b+'.abstractNodeTree,"'+L(d)+"\",e);return ''; \n";f+="\t\t }\n";f+="})();";
return p.createFunction(a,d,f)};p.createAttrClassStyleSingleFunction=function(a,b,c,d){var e=(new Date).valueOf(),f="$_TEMPLATE_THIS_"+e+"_";e="$_TEMPLATE_OBJECT_"+e+"_";c=p.createParameter(f,c);var g="var "+f+"=this;\nreturn (function(){\n\t\t try{\n";g+="\t\t\t var "+e+"={'"+(b+"':(function(){return ")+c+";}())};\n";g+="\t\t\t return "+e+";\n";g+="\t\t }catch(e){\n";g+="\t\t\t "+f+".triggerError("+f+'.abstractNodeTree,"'+L(d)+'",e);return false; \n';g+="\t\t }\n";g+="})();";return p.createFunction(a,
d,g,k.option.commandWarning)};p.createAttrClassStyleFunction=function(a,b,c,d){var e=(new Date).valueOf();b="$_TEMPLATE_THIS_"+e+"_";e="$_TEMPLATE_OBJECT_"+e+"_";var f=p.createParameter(b,c);var g="var "+b+"=this;\nreturn (function(){\n\t\t try{\n";g+="\t\t\t var "+e+"="+f+";\n";g+="\t\t\t if(typeof "+e+" == 'object'){\n";g+="\t\t\t\t return "+e+";\n";g+="\t\t\t }else{\n";g+="\t\t\t\t throw "+b+".language('render-0004',"+b+".decodeHTML('"+L(c)+"'));\n";g+="\t\t\t }\n";g+="\t\t }catch(e){\n";g+="\t\t\t "+
b+".triggerError("+b+'.abstractNodeTree,"'+L(d)+'",e);return false; \n';g+="\t\t }\n";g+="})();";return p.createFunction(a,d,g,k.option.commandWarning)};p.createBeforeAfterFunction=function(a,b,c,d){b="$_TEMPLATE_THIS_"+(new Date).valueOf()+"_";c=p.createParameter(b,c);var e="var "+b+"=this;\nreturn (function(){\n\t\t try{\n";e+="\t\t\t"+c+";\n";e+="\t\t }catch(e){\n";e+="\t\t\t "+b+".triggerError("+b+'.abstractNodeTree,"'+L(d)+'",e);return false; \n';e+="\t\t }\n";e+="})();";return p.createFunction(a,
d,e,k.option.commandWarning)};p.setCommandAppend=function(a,b,c){"undefined"==typeof a.command[b]&&(a.command[b]=[]);a.command[b].push(c)};p.setCommandTemplate=function(a,b,c){"undefined"==typeof a.commandTemplate[b]&&(a.commandTemplate[b]=[]);a.commandTemplate[b].push(c)};p.commandIf=function(a,b,c,d){if("undefined"!=typeof a.command["if"]||"undefined"!=typeof a.command.elseif||"undefined"!=typeof a.command["else"])return k.triggerError(a,d,w.content("parse-0001","webpanda-if|elseif|else"),k.option.commandError);
if("webpanda-else"==b)return a.command["else"]=!0,a.commandTemplate["else"]=d,!0;var e=C(c);if("webpanda-if"==b&&""==e)return k.triggerError(a,d,w.content("parse-0003","webpanda-if"),k.option.commandError);if("webpanda-elseif"==b&&""==e)return k.triggerError(a,d,w.content("parse-0003","webpanda-elseif"),k.option.commandError);c="$_TEMPLATE_THIS_"+(new Date).valueOf()+"__";e=p.createParameter(c,e);c="var "+c+"=this;\nreturn (Boolean(function(){try{return "+(e+";}catch(e){"+c+".triggerError("+c+'.abstractNodeTree,"'+
L(d)+'",e);return false;}}()));');c=p.createFunction(a,d,c);if("function"!=typeof c)return!1;"webpanda-if"==b?(a.command["if"]=c,a.commandTemplate["if"]=d):(a.command.elseif=c,a.commandTemplate.elseif=d)};p.commandPrint=function(a,b,c,d,e){b=p.createPrintFunction(a,b,c,d,e);if("function"!=typeof b)return!1;a.command.print=b;a.commandTemplate.print=d};p.commandPrintText=function(a,b,c,d){if("undefined"!=typeof a.command.print)return k.triggerWarning(a,d,w.content("parse-0001","webpanda-html|text|data"),
k.option.commandWarning);b=p.createPrintFunction(a,b,c,d,!1);if("function"!=typeof b)return!1;a.command.print=b;a.commandTemplate.print=d};p.commandPrintHtml=function(a,b,c,d){if("undefined"!=typeof a.command.print)return k.triggerWarning(a,d,w.content("parse-0001","webpanda-html|text|data"),k.option.commandWarning);b=p.createPrintFunction(a,b,c,d,!0);if("function"!=typeof b)return!1;a.command.print=b;a.commandTemplate.print=d};p.commandPrintData=function(a,b,c,d){if("undefined"!=typeof a.command.print)return k.triggerWarning(a,
d,w.content("parse-0001","webpanda-html|text|data"),k.option.commandWarning);b="$_TEMPLATE_THIS_"+(new Date).valueOf()+"_";c=C(c);var e="var "+b+"=this;\nreturn (function(){\n\t try{\n";e=e+("\t\t return "+b+".print("+b+".data['"+c+"']);\n\t }catch(e){\n\t\t ")+(b+".triggerError("+b+'.abstractNodeTree,"'+L(d)+"\",e);return ''; \n");e+="\t }\n";e+="}());\n";b=p.createFunction(a,d,e);if("function"!=typeof b)return!1;a.command.print=b;a.commandTemplate.print=d};p.commandFor=function(a,b,c,d){if("undefined"!=
typeof a.command["for"])return k.triggerError(a,d,w.content("parse-0002","webpanda-for"),k.option.commandError);var e=C(c);if(""==e)return k.triggerError(a,d,w.content("parse-0003","webpanda-for"),k.option.commandError);var f=c=b=void 0,g=void 0;if(e=/\(([^\(\),]+),{0,1}\s{0,}([^\(\),]+)?,{0,1}\s{0,}([^\(\),]+)?\)\s{0,}(.*)/.exec(e))b=C(e[1]),"undefined"!=typeof e[2]&&(e[2]=C(e[2]),""!==e[2]&&(c=e[2])),"undefined"!=typeof e[3]&&(e[3]=C(e[3]),""!==e[3]&&(f=e[3])),g=C(e[4]);if(!g||!b)return k.triggerError(a,
d,w.content("parse-0004","webpanda-for"),k.option.commandError);var m=(new Date).valueOf();e="$_TEMPLATE_THIS_"+m+"_";var t="$_TEMPLATE_CALLBACK_"+m+"_",v="$_TEMPLATE_FOR_OBJECT_"+m+"_",y="$_TEMPLATE_FOR_INDEX_"+m+"_";m="$_TEMPLATE_FOR_NUMBER_"+m+"_";var G="'"+b+"'",T="undefined"!=typeof c?"'"+c+"'":"undefined",Q="undefined"!=typeof f?"'"+f+"'":"undefined",J=p.createParameter(e,g);var B="var "+e+"=this;\nvar "+(t+"=$callback;\nreturn (function(){\n");B+="\t\t try{\n";B+="\t\t\t if(typeof "+e+".data."+
b+"!='undefined') throw "+e+".language('render-0002','"+b+"');\n";"undefined"!=typeof c&&(B+="\t\t\t if(typeof "+e+".data."+c+"!='undefined') throw "+e+".language('render-0001','"+c+"');\n");"undefined"!=typeof f&&(B+="\t\t\t if(typeof "+e+".data."+f+"!='undefined') throw "+e+".language('render-0003','"+f+"');\n");B+="\t\t\t var "+v+"="+J+";\n";B+="\t\t\t if(typeof "+v+"!='object') throw "+e+".language('render-0004','"+g.replace(/'/g,"\\'").replace(/"/g,'\\"')+"');\n";B+="\t\t\t if("+v+" && "+v+".constructor == Array){\n";
B+="\t\t\t\t for(var "+y+"=0; "+y+"<"+v+".length; "+y+"++){\n";B+="\t\t\t\t\t "+e+".data."+b+"="+v+"["+y+"]; \n";"undefined"!=typeof c&&(B+="\t\t\t\t\t "+e+".data."+c+"="+y+"; \n");"undefined"!=typeof f&&(B+="\t\t\t\t\t "+e+".data."+f+"="+y+"; \n");B+="\t\t\t\t\t "+t+"("+e+","+y+","+v+","+y+","+G+","+T+","+Q+"); \n\t\t\t\t }\n\t\t\t }else{\n";B+="\t\t\t\t var "+m+"=0;\n";B+="\t\t\t\t for(var "+y+" in "+v+"){\n";B+="\t\t\t\t\t "+e+".data."+b+"="+v+"["+y+"]; \n";"undefined"!=typeof c&&(B+="\t\t\t\t\t "+
e+".data."+c+"="+y+"; \n");"undefined"!=typeof f&&(B+="\t\t\t\t\t "+e+".data."+f+"="+m+"; \n");B=B+("\t\t\t\t\t "+t+"("+e+","+m+","+v+","+y+","+G+","+T+","+Q+"); \n\t\t\t\t\t ")+(m+"++;\n\t\t\t\t }\n");B+="\t\t\t }\n";B+="\t\t\t if(typeof "+e+".data."+b+" != 'undefined') delete "+e+".data."+b+";\n";"undefined"!=typeof c&&(B+="\t\t\t if(typeof "+e+".data."+c+" != 'undefined') delete "+e+".data."+c+";\n");"undefined"!=typeof f&&(B+="\t\t\t if(typeof "+e+".data."+f+" != 'undefined') delete "+e+".data."+
f+";\n");B+="\t\t }catch(e){\n";B+="\t\t\t "+e+".triggerError("+e+'.abstractNodeTree,"'+L(d)+"\",e);return ''; \n";B+="\t\t }\n";B+="})();";b=p.createFunction(a,d,B);if("function"!=typeof b)return!1;a.command["for"]=b;a.commandTemplate["for"]=d};p.commandIs=function(a,b,c,d){if("undefined"!=typeof a.command.is)return k.triggerError(a,d,w.content("parse-0002","webpanda-is"),k.option.commandError);c=C(c);if("webpanda-is"==b&&""==c)return k.triggerError(a,d,w.content("parse-0003","webpanda-is"),k.option.commandError);
b="$_TEMPLATE_THIS_"+(new Date).valueOf()+"_";c=p.createParameter(b,c);b="var "+b+"=this;\nreturn (Boolean(function(){try{return "+(c+";}catch(e){"+b+".triggerError("+b+'.abstractNodeTree,"'+L(d)+'",e);return false;}}()));');b=p.createFunction(a,d,b);if("function"!=typeof b)return!1;a.command.is=b;a.commandTemplate.is=d};p.commandAttribute=function(a,b,c,d){c=C(c);if(""==c)return k.triggerWarning(a,d,w.content("parse-0003","webpanda-attribute"),k.option.commandWarning);if(0==b.indexOf("webpanda-attribute-")){b=
b.replace(/^webpanda\-attribute\-/,"");if(""==b)return k.triggerWarning(a,d,w.content("parse-0005","webpanda-attribute"),k.option.commandWarning);b=p.createAttrClassStyleSingleFunction(a,b,c,d)}else b=p.createAttrClassStyleFunction(a,b,c,d);if("function"!=typeof b)return!1;p.setCommandAppend(a,"attribute",b);p.setCommandTemplate(a,"attribute",d)};p.commandClass=function(a,b,c,d){c=C(c);if(""==c)return k.triggerWarning(a,d,w.content("parse-0003","webpanda-class"),k.option.commandWarning);if(0==b.indexOf("webpanda-class-")){b=
b.replace(/^webpanda\-class\-/,"");if(""==b)return k.triggerWarning(a,d,w.content("parse-0006","webpanda-class"),k.option.commandWarning);b=p.createAttrClassStyleSingleFunction(a,b,c,d)}else b=p.createAttrClassStyleFunction(a,b,c,d);if("function"!=typeof b)return!1;p.setCommandAppend(a,"class",b);p.setCommandTemplate(a,"class",d)};p.commandStyle=function(a,b,c,d){c=C(c);if(""==c)return k.triggerWarning(a,d,w.content("parse-0003","webpanda-style"),k.option.commandWarning);if(0==b.indexOf("webpanda-style-")){b=
b.replace(/^webpanda\-style\-/,"");if(""==b)return k.triggerWarning(a,d,w.content("parse-0007","webpanda-style"),k.option.commandWarning);b=p.createAttrClassStyleSingleFunction(a,b,c,d)}else b=p.createAttrClassStyleFunction(a,b,c,d);if("function"!=typeof b)return!1;p.setCommandAppend(a,"style",b);p.setCommandTemplate(a,"style",d)};p.commandEvent=function(a,b,c,d){c=C(c);if(""==c)return k.triggerWarning(a,d,w.content("parse-0003","webpanda-on*[-on*]"),k.option.commandWarning);var e=b.split("-");e.splice(0,
1);b=[];for(var f in e)e[f]=C(e[f]),e[f]=e[f].replace(/^on/,""),""!=e[f]&&b.push(e[f]);if(1>b.length)return k.triggerWarning(a,d,w.content("parse-0008","webpanda-on*[-on*]"),k.option.commandWarning);var g=(new Date).valueOf();e="$_TEMPLATE_THIS_"+g+"_";g="$_TEMPLATE_EVENT_"+g+"_";c=p.createParameter(e,c,g);g="var "+e+"=this;\nvar "+(g+"=$event;\nreturn (function(){\n");g+="\t\t try{\n";g+="\t\t\t "+c+";\n";g+="\t\t }catch(e){\n";g+="\t\t\t "+e+".triggerError("+e+'.abstractNodeTree,"'+L(d)+'",e);return undefined; \n';
g+="\t\t }\n";g+="})();";c=p.createFunction(a,d,g,k.option.commandWarning);if("function"!=typeof c)return!1;p.setCommandTemplate(a,"event",d);"undefined"==typeof a.command.event&&(a.command.event={});for(f in b)"undefined"==typeof a.command.event[b[f]]&&(a.command.event[b[f]]=[]),a.command.event[b[f]].push(c)};p.commandTemplate=function(a,b,c,d){if("undefined"!=typeof a.command.template)return k.triggerWarning(a,d,w.content("parse-0002","webpanda-template"),k.option.commandWarning);var e=C(c);if(""!=
e){var f=(new Date).valueOf();b="$_TEMPLATE_THIS_"+f+"_";f="$_TEMPLATE_STRING_"+f+"_";e=p.createParameter(b,e);var g="var "+b+"=this;\nreturn (function(){\n\t\t try{\n";g+="\t\t var "+f+"="+e+";\n";g+="\t\t if(typeof "+f+" == 'string'){\n";g+="\t\t\t return "+f+";\n";g+="\t\t }else{\n";g+="\t\t\t throw "+b+".language('render-0005','"+c.replace(/'/g,"\\'").replace(/"/g,'\\"')+"');\n";g+="\t\t }\n";g+="\t\t }catch(e){\n";g+="\t\t "+b+".triggerError("+b+'.abstractNodeTree,"'+L(d)+"\",e);return ''; \n";
g+="\t\t }\n";g+="\t })();";c=p.createFunction(a,d,g);if("function"!=typeof c)return!1}else c=function(){return""};a.command.template=c;a.commandTemplate.template=d};p.commandFragment=function(a,b,c,d){a.command.fragment=!0;a.commandTemplate.fragment=d};p.commandBefore=function(a,b,c,d){c=C(c);if(""==c)return k.triggerWarning(a,d,w.content("parse-0003","webpanda-before"),k.option.commandWarning);b=p.createBeforeAfterFunction(a,b,c,d);if("function"!=typeof b)return!1;p.setCommandAppend(a,"before",
b);p.setCommandTemplate(a,"before",d)};p.commandAfter=function(a,b,c,d){c=C(c);if(""==c)return k.triggerWarning(a,d,w.content("parse-0003","webpanda-after"),k.option.commandWarning);b=p.createBeforeAfterFunction(a,b,c,d);if("function"!=typeof b)return!1;p.setCommandAppend(a,"after",b);p.setCommandTemplate(a,"after",d)};n.setting=function(a){var b={commands:void 0,group:void 0,index:-1,each:void 0,triggerListener:!1,context:n.context.clone()};if(a)for(var c in a)"undefined"!=typeof a[c]&&(b[c]=a[c]);
return b};n.context={global:{},handler:{abstractNodeTree:void 0,command:void 0},clone:function(){var a={global:{}},b;for(b in n.context.global){var c=n.context.global[b];a.global[b]={abstractNodeTree:c.abstractNodeTree,command:c.command}}return a},recover:function(a,b,c){var d=[],e={},f=void 0;try{if(b.each&&b.each.length)for(var g in b.each)if(f=b.each[g].abstractNodeTree,!f||f.isDeleted())f=void 0;else{var m=b.each[g].key,t=b.each[g].index,v=b.each[g].valueName,y=b.each[g].keyName,G=b.each[g].indexName;
if(void 0!==v){if("undefined"==typeof e[v]){if("undefined"!=typeof a.data[v])throw w.content("render-0002",v);e[v]=!0}a.data[v]=b.each[g].forObject[m];d.push(v);if(void 0!==y){if("undefined"==typeof e[y]){if("undefined"!=typeof a.data[y])throw w.content("render-0001",y);e[y]=!0}a.data[y]=m;d.push(y)}if(void 0!==G){if("undefined"==typeof e[G]){if("undefined"!=typeof a.data[G])throw w.content("render-0003",G);e[G]=!0}a.data[G]=t;d.push(G)}}}if(b.context){var T=b.context;n.context.global={};for(t in T.global){var Q=
T.global[t];Q.abstractNodeTree&&!Q.abstractNodeTree.isDeleted()&&(n.context.global[t]={abstractNodeTree:Q.abstractNodeTree,command:Q.command})}}c()}catch(J){f&&k.triggerError(f,"webpanda-for",J,k.option.templateError)}if(d.length)for(g in d)"undefined"!=typeof a.data[d[g]]&&delete a.data[d[g]]},defineHandler:function(a,b,c){n.context.handler.abstractNodeTree=a;n.context.handler.command=b;a=c();n.context.handler.abstractNodeTree=void 0;n.context.handler.command=void 0;return a},defineGlobal:function(a,
b,c){n.context.global[a.index]={abstractNodeTree:a,command:b};b=c();delete n.context.global[a.index];return b}};n.command={log:{},record:function(a,b){"undefined"==typeof n.command.log[a.index]?n.command.log[a.index]=[b]:0>n.command.log[a.index].indexOf(b)&&n.command.log[a.index].push(b)},status:function(a,b,c){n.command.record(a,b);if("undefined"==typeof c.commands||0<=c.commands.indexOf(b))return!0;a=["if","is","for","template","print"];for(var d in a)if(0<=c.commands.indexOf(a[d]))return!0;return!1}};
n.isRefresh=function(a,b){return a.option&k.option.refresh&&!b.triggerListener?!0:!1};n.eventListener=function(a,b,c,d,e){e=e||F.event;n.context.recover(b,c,function(){b.abstractNodeTree=a;for(var f in d)!1===d[f].apply(b,void 0,e)&&(e.preventDefault?e.preventDefault():e.returnValue=!1)})};n.elementContainerValue=function(a,b,c,d,e){var f=d.command,g=d.commandGlobal,m=d.isGlobal;d=d.isInnerHTML;var t=f+"Node";f+="Value";var v=!1;"undefined"==typeof a.commandBuffer[t]&&(a.commandBuffer[t]=H.createElement("div"),
v=!0);!m&&a.children&&a.children.length&&(n.context.defineGlobal(a,g,function(){for(var y=n.setting({group:a.children,each:c.each}),G=0;G<a.children.length;G++)y.index=G,n.node(a.commandBuffer[t],a.children[G],b,y)}),b.abstractNodeTree=a);g="";d?"undefined"!=typeof a.commandBuffer[t].innerHTML&&(g=a.commandBuffer[t].innerHTML):"undefined"!=typeof a.commandBuffer[t].textContent?g=a.commandBuffer[t].textContent:"undefined"!=typeof a.commandBuffer[t].innerText&&(g=a.commandBuffer[t].innerText);if(a.commandBuffer[f]!=
g||n.isRefresh(b,c))e(g,a.commandBuffer[t],v),a.commandBuffer[f]=g};n.forTagLeftClear=function(a){var b=a.tagLeft,c=a.attributeTemplate["webpanda-for"];a.attributeTemplate["webpanda-if"]&&(c=c.concat(a.attributeTemplate["webpanda-if"]));a.attributeTemplate["webpanda-elseif"]&&(c=c.concat(a.attributeTemplate["webpanda-elseif"]));a.attributeTemplate["webpanda-else"]&&(c=c.concat(a.attributeTemplate["webpanda-else"]));a.attributeTemplate["webpanda-template"]&&(c=c.concat(a.attributeTemplate["webpanda-template"]));
for(var d in c)b=b.replace(" "+c[d],"");return b};n.ifParentDisableRender=function(a,b){var c=[];if(a.children&&a.children.length)for(var d in a.children)c.push(a.children[d]);for(a=a.index;c&&c.length;)d=c.pop(),"object"!=typeof d.commandBuffer.parentDisableRender&&(d.commandBuffer.parentDisableRender={}),b?"undefined"!=typeof d.commandBuffer.parentDisableRender[a]&&delete d.commandBuffer.parentDisableRender[a]:d.commandBuffer.parentDisableRender[a]=!0,d.children&&d.children.length&&(c=c.concat(d.children))};
n.ifElseSyntax=function(a,b){var c=0;if("undefined"==typeof b.group||"undefined"==typeof b.index||0==b.index)return c;var d=parseInt(b.index)-1;for(c=2;0<=d;d--){var e=b.group[d];if(e.isTagElement())if("undefined"!=typeof e.commandBuffer["if"]){e.command["if"].call(a);e.commandBuffer["if"]&&(c=1);break}else if("undefined"!=typeof e.commandBuffer.elseif)e.command.elseif.call(a),e.commandBuffer.elseif&&(c=1);else{c=0;break}}return c};n.node=function(a,b,c,d){if(b&&b.isDeleted())return b.remove(),b=
null,!1;if(!a||!b||!b.isRender()||b.isCommandError()||"object"==typeof a&&a.constructor==M&&(!a.isRender()||a.isCommandError()))return!1;var e=n.setting(d);b.renderFunction=function(f){e.triggerListener=!0;"undefined"!=typeof f.commands&&(e.commands=f.commands);n.context.recover(c,e,function(){n.node(a,b,c,e);c.onlistener.call(b,f)})};b.option&=~k.option.templateError;c.abstractNodeTree=b;b.selector=a;b.debug=c.debug;if(b.command.before){if(b.isError())return null;n.context.defineHandler(b,"before",
function(){n.commandBefore(b,"before",c,d)})}if(b.command["if"]||b.command.elseif||b.command["else"]){if(b.isError())return null;if(!n.context.defineHandler(b,"if",function(){return n.commandIf(b,"if",c,d)}))return!1}if(b.command.template){if(b.isError())return null;n.context.defineHandler(b,"template",function(){n.commandTemplate(b,"template",c,d)})}if(b.command["for"])return b.isError()?null:n.context.defineHandler(b,"for",function(){return n.commandFor(a,b,"for",c,d)});if(b.command.is){if(b.isError())return null;
if(!n.context.defineHandler(b,"is",function(){return n.commandIs(b,"is",c,d)}))return!1}if(!b.node&&!b.isVoid()){if(b.isError())return null;b.createNode()}if(b.command.print){if(b.isError())return null;n.context.defineHandler(b,"print",function(){n.commandPrint(b,"print",c,d)})}if(b.isVoid())return b.isError()?null:n.context.defineHandler(b,"void",function(){return n.commandVoid(a,b,"void",c,d)});if(b.node){if(b.isNodeTextarea()){if(b.isError())return null;n.context.defineHandler(b,"textarea",function(){n.commandTextarea(b,
"textarea","textarea-global",c,d)})}if(b.isNodeSvg()){if(b.isError())return null;n.context.defineHandler(b,"svg",function(){n.commandSvg(b,"svg","svg-global",c,d)})}if(b.command.attribute){if(b.isError())return null;n.context.defineHandler(b,"attribute",function(){n.commandAttribute(b,"attribute",c,d)})}if(b.command["class"]){if(b.isError())return null;n.context.defineHandler(b,"class",function(){n.commandClass(b,"class",c,d)})}if(b.command.style){if(b.isError())return null;n.context.defineHandler(b,
"style",function(){n.commandStyle(b,"style",c,d)})}if(b.command.event){if(b.isError())return null;n.context.defineHandler(b,"event",function(){n.commandEvent(b,"event",c,d)})}}n.childNode(a,b,c,d);if(b.node&&!b.isNodeTextarea()&&!b.isNodeSvg()){if(b.isError())return null;n.context.defineHandler(b,"children",function(){n.commandChildren(b,"children",c,d)})}if(b.command.after){if(b.isError())return null;n.context.defineHandler(b,"after",function(){n.commandAfter(b,"after",c,d)})}};n.childNode=function(a,
b,c,d){if(!a||!b||!b.node)return!1;if("object"==typeof a&&a.constructor==M){a=k.querySelector(a,b,c,d);if(!a)return k.triggerWarning(b,"selector",w.content("render-0006")),!1;a.brother?a.parent.insertBefore(b.node,a.brother):a.parent.appendChild(b.node)}else if(a instanceof HTMLElement&&b.node.parentNode!=a){b.node.parentNode&&b.node.parentNode.removeChild(b.node);try{var e=k.queryBrotherAbstractNodeTree(a,b,c,d);e?a.insertBefore(b.node,e.node):a.appendChild(b.node)}catch(f){k.triggerWarning(b,"selector",
f)}return!0}};n.commandChildren=function(a,b,c,d){if(!n.command.status(a,b,d))return!1;if(a.children&&a.children.length)for(b=n.setting({commands:d.commands,group:a.children,each:d.each}),d=0;d<a.children.length;d++)b.index=d,n.node(a.node,a.children[d],c,b);c.abstractNodeTree=a};n.commandBefore=function(a,b,c,d){if(!n.command.status(a,b,d))return null;for(var e in a.command.before)a.command.before[e].call(c);"undefined"==typeof a.commandBuffer.before?a.commandBuffer.before=1:a.commandBuffer.before++};
n.commandIf=function(a,b,c,d){var e=k.option.templateError|k.option.commandError;if(a.command&&a.command["if"]){if(n.command.status(a,b,d)&&(a.commandBuffer["if"]=a.command["if"].call(c)),!a.commandBuffer["if"])return a.clear(),n.ifParentDisableRender(a,!1),!1}else if(a.command&&a.command.elseif){var f=n.ifElseSyntax(c,d);if(0==f)return a.clear(),n.ifParentDisableRender(a,!1),k.triggerError(a,a.commandTemplate.elseif,w.content("parse-0009","webpanda-elseif"),e),!1;n.command.status(a,b,d)&&(a.commandBuffer.elseif=
a.command.elseif.call(c));1==f&&(a.commandBuffer.elseif=!1);if(!a.commandBuffer.elseif)return a.clear(),n.ifParentDisableRender(a,!1),!1}else if(a.command&&a.command["else"]){f=n.ifElseSyntax(c,d);if(0==f)return a.clear(),n.ifParentDisableRender(a,!1),k.triggerError(a,a.commandTemplate["else"],w.content("parse-0009","webpanda-else"),e),!1;a.commandBuffer["else"]=1==f?!1:!0;if(!a.commandBuffer["else"])return a.clear(),n.ifParentDisableRender(a,!1),!1}n.ifParentDisableRender(a,!0);return!0};n.commandTemplate=
function(a,b,c,d){if(!n.command.status(a,b,d))return null;b=a.command.template.call(c);b=a.tagInner+b;if("undefined"==typeof a.commandBuffer.template||a.commandBuffer.template!=b){a.commandBuffer.template=b;a.clear();if(a.node&&a.node.childNodes)for(;a.node.childNodes.length;)a.node.removeChild(a.node.firstChild);a.removeChild();a.children=[];a.command["for"]?(c=n.forTagLeftClear(a),a.commandBuffer.forTemplate=c+a.commandBuffer.template+a.tagRight):(c=new R({template:a.commandBuffer.template,debug:c.debug,
parent:c.compiler,parentAbstractNodeTree:a}),a.children=c.abstractNodeTree)}};n.commandFor=function(a,b,c,d,e){if(!n.command.status(b,c,e))return null;if("undefined"==typeof b.commandBuffer.forTemplate){var f=n.forTagLeftClear(b);b.commandBuffer.forTemplate=f+b.tagInner+b.tagRight;b.removeChild();b.children=[]}var g=0;b.command["for"].call(d,function(m,t,v,y,G,T,Q){if("undefined"==typeof b.children[t]){var J=new R({template:b.commandBuffer.forTemplate,debug:d.debug,parent:d.compiler,parentAbstractNodeTree:b});
b.children.push(J.abstractNodeTree[0])}J=n.setting({group:b.children});g++;J.index=t;J.each=[];O(e.each)&&(J.each=J.each.concat(e.each));J.each.push({abstractNodeTree:b,forObject:v,key:y,index:t,valueName:G,keyName:T,indexName:Q});n.node(a,b.children[t],m,J);n.context.handler.abstractNodeTree=b;n.context.handler.command=c});b.removeChild(g);return null};n.commandIs=function(a,b,c,d){n.command.status(a,b,d)&&(a.commandBuffer.is=a.command.is.call(c));if(a.commandBuffer.is)return n.ifParentDisableRender(a,
!0),!0;a.clear();n.ifParentDisableRender(a,!1);return!1};n.commandPrint=function(a,b,c,d){b=n.command.status(a,b,d)?a.command.print.call(c):a.commandBuffer.print;if("undefined"==typeof a.commandBuffer.print||a.commandBuffer.print!==b||n.isRefresh(c,d)){a.commandBuffer.print=b;if("object"==typeof a.commandBuffer.printAbstractNodeTree){for(var e in a.commandBuffer.printAbstractNodeTree){for(var f in a.children)if(a.children[f]==a.commandBuffer.printAbstractNodeTree[e]){a.children.splice(f,1);break}a.commandBuffer.printAbstractNodeTree[e].remove()}a.commandBuffer.printAbstractNodeTree=
[]}""!==b&&(c=new R({template:b,debug:c.debug,option:k.option.disableCommand,parent:c.compiler,parentAbstractNodeTree:a}),a.children=a.children.concat(c.abstractNodeTree),a.commandBuffer.printAbstractNodeTree=c.abstractNodeTree)}};n.commandVoid=function(a,b,c,d,e){if(!n.command.status(b,c,e))return!1;c=n.setting({commands:e.commands,group:b.children,each:e.each});for(e=0;e<b.children.length;e++)c.index=e,n.node(a,b.children[e],d,c);return null};n.commandTextarea=function(a,b,c,d,e){var f=n.command.status(a,
b,e),g=n.command.status(a,c,e);if(!f&&!g)return!1;n.elementContainerValue(a,d,e,{command:b,commandGlobal:c,isGlobal:f?!1:!0,isInnerHTML:!1},function(m,t,v){a.node.value=m})};n.commandSvg=function(a,b,c,d,e){var f=n.command.status(a,b,e),g=n.command.status(a,c,e);if(!f&&!g)return!1;n.elementContainerValue(a,d,e,{command:b,commandGlobal:c,isGlobal:f?!1:!0,isInnerHTML:!0},function(m,t,v){if("undefined"==typeof a.node.innerHTML){t=H.createElement("div");t.innerHTML="<svg>"+m+"</svg>";for(m=t.firstChild;a.node.firstChild;)a.node.removeChild(a.node.firstChild);
for(;m.firstChild;)a.node.appendChild(m.firstChild)}else a.node.innerHTML=m})};n.commandAttribute=function(a,b,c,d){if(!n.command.status(a,d,b))return null;"undefined"==typeof a.commandBuffer.attribute&&(a.commandBuffer.attribute={});for(var e in a.command.attribute)if((b=a.command.attribute[e].call(c))&&"object"==typeof b)for(var f in b){var g="function"==typeof b[f]?b[f]():b[f];"input"==a.node.nodeName.toLowerCase()&&("checked"!=f.toLowerCase()||"checkbox"!=a.node.type&&"radio"!=a.node.type?"value"==
f.toLowerCase()&&a.node.value!==g&&(a.node.value="string"!=typeof g&&"number"!=typeof g?"":g):a.node.checked=g?!0:!1);"textarea"==a.node.nodeName.toLowerCase()&&"value"==f.toLowerCase()&&a.node.value!==g&&(a.node.value="string"!=typeof g&&"number"!=typeof g?"":g);"option"==a.node.nodeName.toLowerCase()&&"selected"==f.toLowerCase()&&(a.node.selected=g?!0:!1);if("undefined"==typeof a.commandBuffer.attribute[f]||a.commandBuffer.attribute[f]!==g||n.isRefresh(c,d)){var m=a.node.getAttribute(f);!1===g||
""===g?null!==m&&a.node.removeAttribute(f):m!==g&&a.node.setAttribute(f,g);a.commandBuffer.attribute[f]=g}}};n.commandClass=function(a,b,c,d){if(!n.command.status(a,b,d))return null;"undefined"==typeof a.commandBuffer["class"]&&(a.commandBuffer["class"]={});for(var e in a.command["class"])if((b=a.command["class"][e].call(c))&&"object"==typeof b)for(var f in b){var g="function"==typeof b[f]?b[f]():b[f];if("undefined"==typeof a.commandBuffer["class"][f]||a.commandBuffer["class"][f]!==g||n.isRefresh(c,
d)){var m=C(f),t=a.node.className?a.node.className.split(/\s+/):[];if(g){var v=!1,y;for(y in t)if(t[y]==m){v=!0;break}v||t.push(m)}else for(y in t)if(t[y]==m){t.splice(y,1);break}a.node.className=t.join(" ");a.commandBuffer["class"][f]=g}}""==a.node.className&&a.node.removeAttribute("class")};n.commandStyle=function(a,b,c,d){if(!n.command.status(a,b,d))return null;"undefined"==typeof a.commandBuffer.style&&(a.commandBuffer.style={});for(var e in a.command.style)if((b=a.command.style[e].call(c))&&
"object"==typeof b)for(var f in b){var g="function"==typeof b[f]?b[f]():b[f];if("undefined"==typeof a.commandBuffer.style[f]||a.commandBuffer.style[f]!==g||n.isRefresh(c,d)){var m=C(f);if("object"==typeof g)for(var t in g){if(a.node.style[m]=g[t],a.node.style[m]==g[t])break}else a.node.style[m]=g;a.commandBuffer.style[f]=g}}""==a.node.getAttribute("style")&&a.node.removeAttribute("style")};n.commandEvent=function(a,b,c,d){if(!n.command.status(a,b,d))return null;for(var e in a.command.event)(function(f){"undefined"!=
typeof a.eventListener[f]&&(oa(a.node,f,a.eventListener[f]),delete a.eventListener[f]);var g=[],m;for(m in a.command.event[f])g.push(a.command.event[f][m]);if(!g.length)return!1;a.eventListener[f]=function(t){n.eventListener(a,c,d,g,t)};na(a.node,f,a.eventListener[f])})(e)};n.commandAfter=function(a,b,c,d){if(!n.command.status(a,b,d))return null;for(var e in a.command.after)a.command.after[e].call(c);"undefined"==typeof a.commandBuffer.after?a.commandBuffer.after=1:a.commandBuffer.after++};ka.prototype=
{constructor:ka,trigger:function(a,b){k.listenerTrigger(this,a,b)},bound:function(a){var b=n.context;"undefined"!=typeof b.handler.abstractNodeTree&&"undefined"!=typeof b.handler.command&&b.handler.abstractNodeTree.isCompiler(this.compiler)&&k.listenerBoundHandler(this,a,b.handler.abstractNodeTree,b.handler.command);for(var c in b.global){var d=b.global[c];d.abstractNodeTree&&d.abstractNodeTree.isCompiler(this.compiler)&&k.listenerBoundGlobal(this,a,d.abstractNodeTree,d.command)}},remove:function(a,
b,c){var d=[],e;for(e in this.handler[a][b.index][1]){var f=this.handler[a][b.index][1][e];0>c.indexOf(f)&&d.push(f)}this.handler[a][b.index][1]=null;this.handler[a][b.index][1]=d}};R.prototype={constructor:R,render:function(a){this.status=!0;return k.render(this,a)},reparse:function(){this.status=!1;k.remove(this);delete this.abstractNodeTree;this.abstractNodeTree=k.parse(this);return this},clear:function(){this.status=!1;if(this.abstractNodeTree)for(var a in this.abstractNodeTree)this.abstractNodeTree[a].clear();
return this}};k.option=function(){var a={};Object.defineProperties(a,{compiler:{value:1,writable:!1,enumerable:!0,configurable:!1},abstractNodeTree:{value:2,writable:!1,enumerable:!0,configurable:!1},disableCommand:{value:4,writable:!1,enumerable:!0,configurable:!1},disableRender:{value:8,writable:!1,enumerable:!0,configurable:!1},disableListener:{value:16,writable:!1,enumerable:!0,configurable:!1},resetListener:{value:32,writable:!1,enumerable:!0,configurable:!1},refresh:{value:64,writable:!1,enumerable:!0,
configurable:!1},deleted:{value:128,writable:!1,enumerable:!0,configurable:!1},tagError:{value:256,writable:!1,enumerable:!0,configurable:!1},tagSingle:{value:512,writable:!1,enumerable:!0,configurable:!1},tagComment:{value:1024,writable:!1,enumerable:!0,configurable:!1},tagText:{value:2048,writable:!1,enumerable:!0,configurable:!1},nodeVoid:{value:4096,writable:!1,enumerable:!0,configurable:!1},commandWarning:{value:8192,writable:!1,enumerable:!0,configurable:!1},commandError:{value:16384,writable:!1,
enumerable:!0,configurable:!1},templateWarning:{value:32768,writable:!1,enumerable:!0,configurable:!1},templateError:{value:65536,writable:!1,enumerable:!0,configurable:!1}});return a}();Object.preventExtensions(k.option);k.autoIncrement={compiler:0,abstractNodeTree:0};k.createIndex=function(a){var b=0;a&k.option.compiler?(b=k.autoIncrement.compiler,k.autoIncrement.compiler++):a&k.option.abstractNodeTree&&(b=k.autoIncrement.abstractNodeTree,k.autoIncrement.abstractNodeTree++);return b};k.render=function(a,
b){b&&"object"==typeof b||(b={});var c=0;P(b.option)&&K(b.option)?c=parseInt(b.option):ba(b.option)&&(c=b.option);b={compiler:a,data:"object"!=typeof b.data||null===b.data?{}:b.data,selector:"undefined"==typeof b.selector?void 0:b.selector,option:c,onlistener:"function"==typeof b.onlistener?b.onlistener:function(){},debug:"string"==typeof b.debug||"number"==typeof b.debug?b.debug:void 0};c&k.option.resetListener&&k.listenerRemove(b.data,a);c&k.option.disableListener||k.listenerCreate(b.data,a);return n(b)};
k.parse=function(a){return p(a,a.template,0,a.parentAbstractNodeTree)};k.remove=function(a){if(a.abstractNodeTree)for(var b in a.abstractNodeTree)a.abstractNodeTree[b].remove()};k.queryValidAbstractNodeTrees=function(a){var b=[];if(a&&a.length){for(var c=0;c<a.length;c++)if(!a[c].isDeleted()){if(a[c].isVoid()){var d=k.queryValidAbstractNodeTrees(a[c].children);d&&d.length&&(b=b.concat(d))}else b.push(a[c]);a[c].bind&&a[c].bind.abstractNodeTree&&(d=k.queryValidAbstractNodeTrees(a[c].bind.abstractNodeTree))&&
d.length&&(b=b.concat(d))}return b}};k.querySelector=function(a,b,c,d){for(var e=a,f=2;0<f;){if(e.isVoid()){var g=e.children;if(g.length&&(g=k.querySelectorNode(g)))return b=k.queryBrotherAbstractNodeTree(g.parent,b,c,d),{parent:g.parent,brother:b?b.node:g.brother}}else if(f--,e.node&&e.node.parentNode)return b=k.queryBrotherAbstractNodeTree(e,b,c,d),{parent:e.node,brother:b?b.node:void 0};if("undefined"==typeof e.parent){g=e.compiler.abstractNodeTree;var m=e;f=-1}else g=e.parent.children,m=e;if(g.length&&
(g=k.querySelectorNode(g,m)))return b=k.queryBrotherAbstractNodeTree(g.parent,b,c,d),{parent:g.parent,brother:b?b.node:g.brother};if(0<f)if("undefined"==typeof e.parent)break;else e=e.parent}if(a.selector&&a.selector instanceof HTMLElement)return b=k.queryBrotherAbstractNodeTree(a.selector,b,c,d),{parent:a.selector,brother:b?b.node:void 0}};k.querySelectorNode=function(a,b){if(a.length){var c=b?!1:!0,d=void 0,e;for(e in a){var f=!1;if(a[e].isVoid()){var g=k.querySelectorAbstractNodeTree(a[e].children);
g&&(d=g,f=!0)}else a[e].node&&a[e].node.parentNode&&(d=a[e],f=!0);a[e].bind&&a[e].bind.abstractNodeTree&&(g=k.querySelectorAbstractNodeTree(a[e].bind.abstractNodeTree))&&(d=g,f=!0);if(b&&b.index===a[e].index)c=!0;else if(c&&f)return{parent:d.node.parentNode,brother:d.node}}if(d)return{parent:d.node.parentNode,brother:d.node.nextSibling}}};k.querySelectorAbstractNodeTree=function(a){if(a.length)for(var b=a.length-1;0<=b;b--)if(!a[b].isDeleted()){if(a[b].isVoid()){var c=k.querySelectorAbstractNodeTree(a[b].children);
if(c)return c}else if(a[b].node&&a[b].node.parentNode)return a[b];if(a[b].bind&&a[b].bind.abstractNodeTree&&(c=k.querySelectorAbstractNodeTree(a[b].bind.abstractNodeTree)))return c}};k.querySelfAbstractNodeTree=function(a,b){if(b.length)for(var c=0;c<b.length;c++)if(!b[c].isDeleted())if(b[c].isVoid()){var d=k.querySelfAbstractNodeTree(a,b[c].children);if(d)return d}else if(b[c].node&&b[c].node==a)return b[c]};k.queryNodeAbstractNodeTree=function(a,b){if(b.length)for(var c=0;c<b.length;c++)if(!b[c].isDeleted())if(b[c].isVoid()){var d=
k.queryNodeAbstractNodeTree(a,b[c].children);if(d)return d}else if(b[c].node&&b[c].node.parentNode==a)return b[c]};k.queryBrotherAbstractNodeTree=function(a,b,c,d){if("undefined"!=typeof b&&a.childNodes)for(var e=b,f,g,m=2;0<m;){e.isVoid()||m--;"undefined"==typeof e.parent?(f=c.compiler.abstractNodeTree,m=-1):f=e.parent.children;if(f.length){g=e===b?d.index:0;for(var t=!1;g<f.length;g++)if(!f[g].isDeleted())if(f[g].index==e.index)t=!0;else if(t){if(f[g].isVoid()){var v=k.queryNodeAbstractNodeTree(a,
f[g].children);if(v)return v}if(f[g].bind&&f[g].bind.abstractNodeTree){if(v=k.queryNodeAbstractNodeTree(a,f[g].bind.abstractNodeTree))return v}else if(f[g].node&&f[g].node.parentNode==a)return f[g]}}if(0<m)if("undefined"==typeof e.parent)break;else e=e.parent}};k.listenerName="__webpanda.js:listener|"+ia+"__";k.listenerCreate=function(a,b){if(!a||"object"!=typeof a||null===a)return!1;var c=0;if(a.constructor==Object)for(var d in a)c++,k.listenerDefineProperty(a,d,a[d],b);else if(a.constructor==Array)for(d=
0;d<a.length;d++)c++,"undefined"==typeof a[d]&&(a[d]=void 0),k.listenerDefineProperty(a,d,a[d],b);else return!1;a.hasOwnProperty(k.listenerName)||Object.defineProperty(a,k.listenerName,{value:new ka(c,b),configurable:!0,writable:!0,enumerable:!1})};k.listenerRemove=function(a){if(!a||"object"!=typeof a||null===a)return!1;if(a.constructor==Object)for(var b in a)k.listenerRemoveProperty(a,b,a[b]);else if(a.constructor==Array)for(b=0;b<a.length;b++)k.listenerRemoveProperty(a,b,a[b]);else return!1;k.listenerStatus(a)&&
delete a[k.listenerName]};k.listenerBoundHandler=function(a,b,c,d){if(!c.isListener())return!1;"undefined"==typeof a.handler[b]?(a.handler[b]={},a.handler[b][c.index]=[c,[d]]):"undefined"==typeof a.handler[b][c.index]?a.handler[b][c.index]=[c,[d]]:0>a.handler[b][c.index][1].indexOf(d)&&a.handler[b][c.index][1].push(d)};k.listenerBoundGlobal=function(a,b,c,d){if(!c.isListener())return!1;"undefined"==typeof a.global[b]?(a.global[b]={},a.global[b][c.index]=[c,[d]]):"undefined"==typeof a.global[b][c.index]?
a.global[b][c.index]=[c,[d]]:0>a.global[b][c.index][1].indexOf(d)&&a.global[b][c.index][1].push(d)};k.listenerTrigger=function(a,b,c){n.command.log={};var d=a.handler[b];if(d)for(var e in d){var f=d[e][0],g=d[e][1];!f||null===f||f.isDeleted()?delete d[e]:f.isListener()&&"function"==typeof f.renderFunction&&(g=k.listenerTriggerCommands(f,g),1>g.length||(a.remove(b,f,g),f.renderFunction({code:b,message:c,commands:g})))}if(a=a.global[b])for(e in a)f=a[e][0],g=a[e][1],!f||null===f||f.isDeleted()?delete a[e]:
f.isListener()&&"function"==typeof f.renderFunction&&f.renderFunction({code:b,message:c,commands:g})};k.listenerTriggerCommands=function(a,b){if("undefined"==typeof n.command.log[a.index])return b;var c=[],d;for(d in b)0>n.command.log[a.index].indexOf(b[d])&&c.push(b[d]);return c};k.listenerLengthContrast=function(a,b,c){if(b.constructor==Object)var d=Object.keys(b).length;else b.constructor==Array&&(d=b.length);a.length!=d&&(a.length=d,c())};k.listenerStatus=function(a){return a&&"object"==typeof a&&
a[k.listenerName]?!0:!1};k.listenerDefineProperty=function(a,b,c,d){k.listenerCreate(c,d);if(Object.getOwnPropertyDescriptor(a,b)&&Object.getOwnPropertyDescriptor(a,b).get&&Object.getOwnPropertyDescriptor(a,b).set)return!0;Object.defineProperty(a,b,{enumerable:!0,configurable:!0,get:function(){k.listenerStatus(a)&&a[k.listenerName].bound(b);k.listenerStatus(c)&&N(function(){if(!k.listenerStatus(c))return!1;k.listenerLengthContrast(c[k.listenerName],c,function(){k.listenerDefineProperty(a,b,c,d);k.listenerStatus(a)&&
a[k.listenerName].trigger(b,"length change")})});return c},set:function(e){var f=!1;typeof c!=typeof e?f=!0:"function"==typeof c&&"function"==typeof e?c.toString()!=e.toString()&&(f=!0):c!=e&&(f=!0);f&&(c=e,N(function(){k.listenerDefineProperty(a,b,c,d);k.listenerStatus(a)&&a[k.listenerName].trigger(b,"set change")}))}})};k.listenerRemoveProperty=function(a,b,c){k.listenerRemove(c);Object.defineProperty(a,b,{enumerable:!0,configurable:!0,value:c})};k.triggerError=function(a,b,c,d){"undefined"==typeof c&&
(c="");c="Webpanda CompilerError:\n\n\u250d---------------------------------------------\u2511\n\n"+("undefined"==typeof c.stack?c:c.stack)+"\n\n\u251d---------------------------------------------\u2525";var e=a.debug||a.compiler.debug;"undefined"!=typeof e&&(c+="\n\n["+w.content("compiler-0005")+"]\n\n"+e);c+="\n\n["+w.content("compiler-0001")+"]\n\n"+b+"\n\n["+w.content("compiler-0002")+"]\n\n"+a.getTemplateLocation().template+"\n\n\u2515---------------------------------------------\u2519\n";d&
k.option.templateError&&(a.option|=k.option.templateError);d&k.option.commandError&&(a.option|=k.option.commandError);console.error(c);u.error(c)};k.triggerWarning=function(a,b,c,d){"undefined"==typeof c&&(c="");c="Webpanda CompilerWarning:\n\n\u250d---------------------------------------------\u2511\n\n"+("undefined"==typeof c.stack?c:c.stack)+"\n\n\u251d---------------------------------------------\u2525";var e=a.debug||a.compiler.debug;"undefined"!=typeof e&&(c+="\n\n["+w.content("compiler-0005")+
"]\n\n"+e);c+="\n\n["+w.content("compiler-0003")+"]\n\n"+b+"\n\n["+w.content("compiler-0004")+"]\n\n"+a.getTemplateLocation().template+"\n\n\u2515---------------------------------------------\u2519\n";d&k.option.templateWarning&&(a.option|=k.option.templateWarning);d&k.option.commandWarning&&(a.option|=k.option.commandWarning);console.warn(c);u.warning(c)};S.prototype={constructor:S,merge:function(a){P(a)&&(a=r(a));return r.merge(this,a)},toString:function(a){return r.build(this,a)}};r.option=function(){var a=
{};Object.defineProperties(a,{protocol:{value:1,writable:!1,enumerable:!0,configurable:!1},account:{value:2,writable:!1,enumerable:!0,configurable:!1},domain:{value:4,writable:!1,enumerable:!0,configurable:!1},port:{value:8,writable:!1,enumerable:!0,configurable:!1},path:{value:16,writable:!1,enumerable:!0,configurable:!1},query:{value:32,writable:!1,enumerable:!0,configurable:!1},hashPath:{value:64,writable:!1,enumerable:!0,configurable:!1},hashQuery:{value:128,writable:!1,enumerable:!0,configurable:!1},
hash:{value:192,writable:!1,enumerable:!0,configurable:!1},host:{value:15,writable:!1,enumerable:!0,configurable:!1},all:{value:255,writable:!1,enumerable:!0,configurable:!1}});return a}();Object.preventExtensions(r.option);r.parse=function(a,b){if(P(b)){b=C(b);var c=/^([a-zA-Z_]+):\/\/([^\/\?#]{0,})/;if(c=c.exec(b))if(b=b.substr(c[0].length),a.protocol=c[1],void 0!==c[2]){var d=/^([^:@]+):([^@]+)@([^:]+)[:]?(.*)?/;if(d=d.exec(c[2]))a.user=d[1],a.password=d[2],a.domain=d[3],"undefined"!=typeof d[4]&&
(a.port=parseInt(d[4]));else if(d=/^([^:]+)[:]?(.*)?/,d=d.exec(c[2]))a.domain=d[1],"undefined"!=typeof d[2]&&(a.port=parseInt(d[2]))}c=/^([^\?#]+)/;if(c=c.exec(b))b=b.substr(c[0].length),c[1].match(/^\//g)?a.absoluteStatus=!0:a.absoluteStatus=!1,c[1].match(/\/$/g)?a.fileStatus=!1:a.fileStatus=!0,c[1]=c[1].replace(/(^\/)|(\/$)/g,""),""!=c[1]&&(a.path=c[1].split("/"));c=/^([^#]+)/;if(c=c.exec(b))b=b.substr(c[0].length),a.query=r.parseQuery(c[1]);c=/^#([^#]+)?/;if(c=c.exec(b))if(b.substr(c[0].length),
a.hashStatus=!0,void 0!==c[1]){b=c[1];if(c=/^([^\?#]+)/.exec(b))b=b.substr(c[0].length),c[1]=c[1].replace(/(^\/)|(\/$)/g,""),""!=c[1]&&(a.hashPath=c[1].split("/"));if(b=/^([^#]+)/.exec(b))a.hashQuery=r.parseQuery(b[1])}}};r.build=function(a,b){var c="";K(b)&&0!=b||(b=r.option.all);b&r.option.protocol&&""!=a.protocol&&(c+=a.protocol,c+="://");b&r.option.account&&(""!=a.user&&(c+=a.user,c+=":"),""!=a.password&&(c+=a.password,c+="@"));b&r.option.domain&&""!=a.domain&&(c+=a.domain);b&r.option.port&&0<=
a.port&&(c=c+":"+a.port);if(b&r.option.path)if(0<a.path.length){var d=r.buildPath(a.path,"file"==a.protocol);a.fileStatus||(d+="/");if(""!=c||a.absoluteStatus)c+="/";c+=d}else a.absoluteStatus&&(c+="/");""!=c&&(b&r.option.query||b&r.option.hashPath||b&r.option.hashQuery)&&(b&r.option.path&&(0!=a.path.length||a.absoluteStatus)||(c+="/"));b&r.option.query&&0<Object.keys(a.query).length&&(c=c+"?"+r.buildQuery(a.query));if(b&r.option.hashPath||b&r.option.hashQuery)if(0<a.hashPath.length||0<Object.keys(a.hashQuery).length||
a.hashStatus)c+="#";b&r.option.hashPath&&0<a.hashPath.length&&(c+=r.buildPath(a.hashPath));b&r.option.hashQuery&&0<Object.keys(a.hashQuery).length&&(c=c+"?"+r.buildQuery(a.hashQuery));return c};r.merge=function(a,b){if("object"!=typeof b)return a;""!=b.protocol&&(a.protocol=b.protocol);""!=b.user&&(a.user=b.user);""!=b.password&&(a.password=b.password);""!=b.domain&&(a.domain=b.domain);0<=b.port&&(a.port=b.port);a.hashStatus=b.hashStatus;a.fileStatus=b.fileStatus;a.absoluteStatus=b.absoluteStatus;
a.query=r.mergeQuery(a.query,b.query);a.path=r.mergePath(a.path,b.path);a.hashQuery=r.mergeQuery(a.hashQuery,b.hashQuery);a.hashPath=r.mergePath(a.hashPath,b.hashPath);return a};r.mergeQuery=function(a,b){D(a)||(a={});if(!D(b))return a;for(var c in b)a[c]=I(b[c]);return a};r.mergePath=function(a,b){O(a)||(a=[]);if(!O(b))return a;for(var c=0;c<b.length;c++)c<a.length?a[c]=I(b[c]):a.push(I(b[c]));return a};r.parseQuery=function(a){a="undefined"==typeof a||null===a?"":"string"==typeof a?a:a.toString();
a=a.replace(/^(\?|#){0,}/g,"");a=a.split("&");for(var b={},c=0;c<a.length;c++){var d=a[c].split("="),e=d.shift();d=d.join("=");if(e.match(/\[([^\[\]]*){0,}\]$/g)){e=e.split("[");var f=e.shift();""!=f&&(b[f]=void 0!==b[f]?b[f]:{},b[f]=r.parseQueryChild(b[f],e,d))}else b[e]=d}return b=X(b)};r.parseQueryChild=function(a,b,c){var d=b.shift().replace(/\]$/g,"");d.match(/^\d$/g)&&(d=parseInt(d));for(var e=0;""==d&&0!==d;){if(void 0===a[e]){d=e;break}e++}b.length?(a[d]=void 0!==a[d]?a[d]:{},a[d]=r.parseQueryChild(a[d],
b,c)):a[d]=c;return a};r.buildPath=function(a,b){var c="";if(!O(a))return c;for(var d=0;d<a.length;d++){var e=b&&""==c?a[d]:U(a[d]);""!=c&&(c+="/");c+=e}return c};r.buildQuery=function(a){var b="";if("object"!=typeof a)return b;for(var c in a){var d=r.buildQueryChild(a[c]),e;for(e in d)c=U(c),b+=c+d[e]+"&"}""!=b&&(b=b.substr(0,b.length-1));return b};r.buildQueryChild=function(a){var b=[];if("object"==typeof a)for(var c in a){var d=r.buildQueryChild(a[c]),e;for(e in d)c=U(c),b.push("["+c+"]"+d[e])}else a=
"="+U(a),b.push(a);return b};Y.prototype={constructor:Y,append:function(){A.load(this,"append")},prepend:function(){A.load(this,"prepend")},isExists:function(){return A.isExists(this)},isLoad:function(){return A.isLoad(this)},remove:function(){return A.remove(this)},unload:function(){return A.unload(this)},onerror:null,onsuccess:null};A.option=function(){var a={};Object.defineProperties(a,{repeat:{value:1,writable:!1,enumerable:!0,configurable:!1},js:{value:2,writable:!1,enumerable:!0,configurable:!1},
css:{value:4,writable:!1,enumerable:!0,configurable:!1}});return a}();Object.preventExtensions(A.option);A.initialize=function(a,b){b&&"object"==typeof b||(b={});"number"==typeof b.url?a.url=r(b.url.toString()):"string"==typeof b.url?a.url=r(b.url):"object"==typeof b.url&&b.url.constructor==S?(a.url=r(""),a.url.merge(b.url)):a.url=r("");K(b.option)&&(a.option=parseInt(b.option));if(!(a.option&(A.option.js|A.option.css))){var c=a.url.toString(r.option.path);""!=c&&(c=C(c.split(".").pop().toLowerCase()),
"js"==c?a.option|=A.option.js:"css"==c&&(a.option|=A.option.css))}if("string"==typeof b.charset||"number"==typeof b.charset)a.charset=b.charset;if("object"==typeof b.selector&&b.selector instanceof HTMLElement)a.selector=b.selector;else if("string"==typeof b.selector||"number"==typeof b.selector)a.selector=b.selector;"function"==typeof b.onerror&&(a.onerror=b.onerror);"function"==typeof b.onsuccess&&(a.onsuccess=b.onsuccess)};A.load=function(a,b){var c=function(f){};"function"==typeof a.onsuccess&&
(c=a.onsuccess);var d=function(f){};"function"==typeof a.onerror&&(d=a.onerror);if(a.option&A.option.repeat||!A.isExists(a))if(a.option&A.option.js?(a.node=H.createElement("script"),a.node.type="text/javascript",a.node.src=a.url.toString(),a.charset&&(a.node.charset=a.charset)):a.option&A.option.css&&(a.node=H.createElement("link"),a.node.rel="stylesheet",a.node.href=a.url.toString(),a.charset&&(a.node.charset=a.charset)),a.node){var e=ja(a.selector);e&&"function"==typeof e.appendChild?(a.node.onerror=
d,a.node.onload=c,"append"==b?e.appendChild(a.node):"prepend"==b?e.insertBefore(a.node,e.firstChild):d.call(a,"method")):d.call(a,"selector")}else d.call(a,"undefined");else c.call(a,"exists")};A.isLoad=function(a){return"object"!=typeof a.node||!a.node.constructor||a.node.constructor!=HTMLLinkElement&&a.node.constructor!=HTMLScriptElement?!1:a.node.parentNode?!0:!1};A.unload=function(a){if("object"!=typeof a.node||!a.node.constructor||a.node.constructor!=HTMLLinkElement&&a.node.constructor!=HTMLScriptElement)return!0;
a.node.parentNode&&a.node.parentNode.removeChild(a.node);return!0};A.isExists=function(a){var b=a.url.toString(r.option.path);if(""==b)return!1;var c=a.url.toString(r.option.host);""==c&&(c=r().toString(r.option.host));if(a.option&A.option.js)var d="js";else if(a.option&A.option.css)d="css";else return!1;var e=!1;d={js:"script",css:"link"}[d];if(void 0!=d){d=H.getElementsByTagName(d);for(var f in d){if(a.option&A.option.js)var g=r(d[f].src);else if(a.option&A.option.css)g=r(d[f].href);else continue;
var m=g.toString(r.option.path);g=g.toString(r.option.host);if(m==b&&g==c){e=!0;break}}}return e};A.remove=function(a){var b=a.url.toString(r.option.path);if(""==b)return!1;var c=a.url.toString(r.option.host);""==c&&(c=r().toString(r.option.host));if(a.option&A.option.js)var d="js";else if(a.option&A.option.css)d="css";else return!1;var e=!1;d={js:"script",css:"link"}[d];if(void 0!=d){d=H.getElementsByTagName(d);for(var f in d){if(a.option&A.option.js)var g=r(d[f].src);else if(a.option&A.option.css)g=
r(d[f].href);else continue;var m=g.toString(r.option.path);g=g.toString(r.option.host);m==b&&g==c&&(d[f].parentNode.removeChild(d[f]),e=!0)}}return e};Z.prototype={constructor:Z,request:function(){E.send(this);return this},abort:function(){"undefined"!=typeof this.XMLHttpRequest&&"undefined"!=typeof this.XMLHttpRequest.abort&&this.XMLHttpRequest.abort();return this},onready:function(a){},onrequest:function(a){},onresponse:function(a){},onsuccess:function(a){},onerror:function(a){}};E.option=function(){var a=
{};Object.defineProperties(a,{async:{value:1,writable:!1,enumerable:!0,configurable:!1},responseText:{value:2,writable:!1,enumerable:!0,configurable:!1},responseXML:{value:4,writable:!1,enumerable:!0,configurable:!1},responseJson:{value:8,writable:!1,enumerable:!0,configurable:!1}});return a}();Object.preventExtensions(E.option);E.initialize=function(a,b){b&&"object"==typeof b||(b={});"number"==typeof b.url?a.url=r(b.url.toString()):"string"==typeof b.url?a.url=r(b.url):"object"==typeof b.url&&b.url.constructor==
S?(a.url=r(""),a.url.merge(b.url)):a.url=r("");K(b.option)&&(a.option=parseInt(b.option));if("undefined"!=typeof b.data){var c=b.data;if("string"==typeof b.data||"number"==typeof b.data)c=r.parseQuery(b.data);c&&"object"==typeof c&&(a.data=c)}"string"==typeof b.method&&(a.method=b.method.toUpperCase());b.header&&"object"==typeof b.header&&(a.header=b.header);"undefined"!=typeof b.timeout&&(c=parseInt(b.timeout))&&!isNaN(c)&&(a.timeout=c);"undefined"!=typeof b.user&&(a.user=b.user);"undefined"!=typeof b.password&&
(a.password=b.password);"function"==typeof b.onready&&(a.onready=b.onready);"function"==typeof b.onrequest&&(a.onrequest=b.onrequest);"function"==typeof b.onsuccess&&(a.onsuccess=b.onsuccess);"function"==typeof b.onerror&&(a.onerror=b.onerror);"function"==typeof b.onresponse&&(a.onresponse=b.onresponse)};E.createXMLHttpRequest=function(a){"undefined"!=typeof a.XMLHttpRequest&&"undefined"!=typeof a.XMLHttpRequest.abort&&a.XMLHttpRequest.abort();a.XMLHttpRequest=void 0;if(F.XMLHttpRequest)a.XMLHttpRequest=
new XMLHttpRequest;else if(F.ActiveXObject)for(var b=["Microsoft.XMLHTTP","MSXML2.XMLHTTP"],c=0;c<b.length;c++)try{a.XMLHttpRequest=new ActiveXObject(b[c]);break}catch(d){E.triggerError(a,"ActiveXObjectError",-1,w.content("ajax-0001"))}};E.send=function(a){E.createXMLHttpRequest(a);if("undefined"==typeof a.XMLHttpRequest||"undefined"==typeof a.XMLHttpRequest.open)return!1;var b=parseInt(a.timeout),c={url:"object"==typeof a.url&&a.url.constructor==S?a.url.toString():"",options:"number"!=typeof a.option||
isNaN(a.option)?0:a.option,method:"string"==typeof a.method?a.method.toUpperCase():"GET",headers:I(a.header),data:null,user:a.user,password:a.password,timeout:isNaN(b)?0:b,isTimeout:!1,timer:void 0,isErrorExecuted:!1,error:function(e,f,g,m){if(this.isErrorExecuted)return!1;this.isErrorExecuted=!0;E.triggerError(e,f,g,m)}};a.XMLHttpRequest.onreadystatechange=function(){a.onready.call(a,a.XMLHttpRequest.readyState);if(4==a.XMLHttpRequest.readyState){c.timer&&(c.timer.stop(),c.timer=void 0);var e={data:void 0,
status:a.XMLHttpRequest.status,message:a.XMLHttpRequest.statusText};if(c.options&E.option.responseText)e.data=a.XMLHttpRequest.responseText;else if(c.options&E.option.responseXML)e.data=a.XMLHttpRequest.responseXML;else if(c.options&E.option.responseJson)try{e.data=""!==a.XMLHttpRequest.response?JSON.parse(a.XMLHttpRequest.response):{}}catch(g){e.data={}}else e.data=a.XMLHttpRequest.response;if(!c.isTimeout&&(200<=e.status&&300>e.status||304==e.status))a.onsuccess.call(a,e);else if(c.isTimeout){if(a.XMLHttpRequest.fireEvent)a.XMLHttpRequest.fireEvent("ontimeout");
else{var f=H.createEvent("HTMLEvents");f.initEvent("timeout",!1,!0);a.XMLHttpRequest.dispatchEvent(f)}e.message="The request timeout";c.error(a,"timeout",e.status,e.message)}else N(function(){c.error(a,"error",e.status,e.message)});a.onresponse.call(a,e);return!0}};a.XMLHttpRequest.onabort=function(){c.error(a,"abort")};a.XMLHttpRequest.onerror=function(){c.error(a,"error")};if(a.data&&"object"==typeof a.data)"undefined"!=typeof FormData&&a.data.constructor==FormData?(c.data=a.data,"undefined"!=typeof c.headers["Content-Type"]&&
delete c.headers["Content-Type"]):c.data=a.data.constructor==Object||a.data.constructor==Array?r.buildQuery(a.data):a.data;else if("string"==typeof a.data||"number"==typeof a.data)c.data=String(a.data);a.XMLHttpRequest.open(c.method,c.url,c.options&E.option.async,c.user,c.password);if(c.headers&&"object"==typeof c.headers)for(var d in c.headers)a.XMLHttpRequest.setRequestHeader(d,c.headers[d]);if(!1===a.onrequest.call(a,a.XMLHttpRequest))return a.XMLHttpRequest.abort(),!1;0<c.timeout&&(c.timer=z(function(){4!=
a.XMLHttpRequest.readyState&&(c.isTimeout=!0,a.XMLHttpRequest.onabort=null,a.XMLHttpRequest.abort(),c.timer&&(c.timer.stop(),c.timer=void 0))},c.timeout,1,!0).start());a.XMLHttpRequest.send(c.data)};E.triggerError=function(a,b,c,d){b={type:b,status:c,message:d};"undefined"==typeof c&&a.XMLHttpRequest&&(b.status=a.XMLHttpRequest.status);"undefined"==typeof d&&a.XMLHttpRequest&&(b.message=a.XMLHttpRequest.statusText);return a.onerror.call(a,b)};la.prototype={constructor:la,back:function(){x.go(-1)},
forward:function(){x.go(1)},go:function(a){x.go(a)},last:function(){x.step(-1)},next:function(){x.step(1)},step:function(a){x.step(a)},log:function(){return{back:x.backLog,current:x.current,forward:x.forwardLog}}};ca.prototype={constructor:ca};x.instance=new la;x.backLog=[];x.forwardLog=[];x.current=void 0;x.setPage=function(a,b){if(!("undefined"==typeof x.current||0>=u.history.pageMaximum)){var c=x.instance,d=x.current;if(b){if(x.forwardLog.length&&x.forwardLog[x.forwardLog.length-1].url.toString()==
d.url.toString())return;u.history.pageMaximum<=x.forwardLog.length&&x.forwardLog.shift();x.forwardLog.push(d);c.backLength=x.forwardLog.length}else{if(x.backLog.length&&x.backLog[x.backLog.length-1].url.toString()==d.url.toString())return;u.history.pageMaximum<=x.backLog.length&&x.backLog.shift();x.backLog.push(d);c.backLength=x.backLog.length}x.current=a;x.setStepLength(x.current)}};x.setStep=function(a){if(!("undefined"==typeof x.current||0>=u.history.stepMaximum)){var b=x.instance,c=x.current;
if("undefined"==typeof c.step[c.index-1]||c.step[c.index-1].toString()!=a)u.history.stepMaximum<=b.lastLength&&0<b.lastLength&&(0<b.nextLength?c.step.pop():c.step.shift()),c.step.splice(c.index+1,0,r(a)),c.index++,x.setStepLength(c)}};x.setStepLength=function(a){var b=x.instance,c=a.step.length;b.lastLength=a.index;b.nextLength=c-a.index-1};x.callback=void 0;x.clear=function(){x.callback=void 0};x.go=function(a){a=Number(a);if(!isNaN(a)){var b=!1;if(0>a){var c=x.backLog;a=Math.abs(a);b=!0}else if(0<
a)c=x.forwardLog;else return;if(!(c.length<a)){var d=a,e=c.length-a,f=c[e];a=f.url.toString();r().toString()==a?(c.splice(e,d),x.setPage(f,b)):(x.callback=function(){c.splice(e,d);x.setPage(f,b)},"function"==typeof F.history.pushState?F.history.pushState(null,"",a):F.location.assign(a))}}};x.step=function(a){a=Number(a);if("undefined"!=typeof x.current&&!isNaN(a)){var b=x.current;if(0!=a&&"undefined"!=typeof b.step[b.index+a]){var c=b.step[b.index+a].toString();r().toString()==c?(b.index+=a,x.setStepLength(b)):
(x.callback=function(){b.index+=a;x.setStepLength(b)},"function"==typeof F.history.pushState?F.history.pushState(null,"",c):F.location.assign(c))}}};q.intervalId=void 0;q.native={onabort:"window",onafterprint:"window",onanimationend:"window",onanimationiteration:"window",onanimationstart:"window",onauxclick:"window",onbeforeprint:"window",onbeforeunload:"window",onblur:"window",oncanplay:"window",oncanplaythrough:"window",onchange:"window",onclick:"window",onclose:"window",oncontextmenu:"window",
oncopy:"document",oncuechange:"window",oncut:"document",ondblclick:"window",ondrag:"window",ondragend:"window",ondragenter:"window",ondragleave:"window",ondragover:"window",ondragstart:"window",ondrop:"window",ondurationchange:"window",onemptied:"window",onended:"window",onerror:"window",onfocus:"window",onformdata:"window",onfullscreenchange:"document",onfullscreenerror:"document",ongotpointercapture:"window",onhashchange:"window",oninput:"window",oninvalid:"window",onkeydown:"window",onkeypress:"window",
onkeyup:"window",onlanguagechange:"window",onload:"window",onloadeddata:"window",onloadedmetadata:"window",onloadstart:"window",onlostpointercapture:"window",onmessage:"window",onmessageerror:"window",onmousedown:"window",onmouseenter:"window",onmouseleave:"window",onmousemove:"window",onmouseout:"window",onmouseover:"window",onmouseup:"window",onoffline:"window",ononline:"window",onpagehide:"window",onpageshow:"window",onpaste:"document",onpause:"window",onplay:"window",onplaying:"window",onpointercancel:"window",
onpointerdown:"window",onpointerenter:"window",onpointerleave:"window",onpointerlockchange:"document",onpointerlockerror:"document",onpointermove:"window",onpointerout:"window",onpointerover:"window",onpointerup:"window",onpopstate:"window",onprogress:"window",onratechange:"window",onrejectionhandled:"window",onreadystatechange:"document",onreset:"window",onresize:"window",onscroll:"window",onseeked:"window",onseeking:"window",onselect:"window",onselectstart:"window",onstalled:"window",onstorage:"window",
onsubmit:"window",onsuspend:"window",ontimeupdate:"window",ontoggle:"window",ontransitioncancel:"window",ontransitionend:"window",ontransitionrun:"window",ontransitionstart:"window",onunhandledrejection:"window",onunload:"window",onvisibilitychange:"document",onvolumechange:"window",onwaiting:"window",onwebkitanimationend:"window",onwebkitanimationiteration:"window",onwebkitanimationstart:"window",onwebkittransitionend:"window",onwheel:"window"};q.listeners={window:{node:F,list:{}},document:{node:H,
list:{}}};q.deployListener=function(){if(l.status){var a=u.getInstance(),b;for(b in q.native)(function(c,d){var e=c.replace(/^on/,"");q.isListener(a,c)?q.addListener(d,e,function(f){q.triggerNative(c,f)}):q.removeListener(d,e)})(b,q.native[b])}};q.isListener=function(a,b){return a&&"function"==typeof a[b]?!0:"undefined"!=typeof l.events[b]&&Object.keys(l.events[b]).length?!0:!1};q.addListener=function(a,b,c){"undefined"!=typeof q.listeners[a]&&(a=q.listeners[a],"undefined"==typeof a.list[b]&&(a.list[b]=
c,na(a.node,b,a.list[b])))};q.removeListener=function(a,b){"undefined"!=typeof q.listeners[a]&&(a=q.listeners[a],"undefined"!=typeof a.list[b]&&(oa(a.node,b,a.list[b]),delete a.list[b]))};q.createTrigger=function(a,b,c){if(!(c instanceof fa)&&"object"==typeof c.extend[a])for(var d in c.extend[a])b.push({callback:c.extend[a][d],target:c});"function"==typeof c[a]&&b.push({callback:c[a],target:c})};q.getTriggers=function(a){var b=[];q.createTrigger(a,b,u.getInstance());var c=[];l.isCurrentProjectEvent(a)&&
c.push(l.project);var d=l.getEventNotCurrentProjects(a);d.length&&(c=c.concat(d));for(var e in c)q.createTrigger(a,b,c[e]);return b};q.getExecuteRenderTriggers=function(a,b,c,d){var e=[];c&&"object"==typeof c&&"function"==typeof c[a]&&(e.push({callback:c[a],target:b}),delete c[a]);"undefined"!=typeof d&&"boolean"==typeof d&&d||q.createTrigger(a,e,u.getInstance());("undefined"==typeof d||"boolean"!=typeof d||d)&&q.createTrigger(a,e,b);return e};q.trigger=function(a,b){if(a.length)for(var c in a){var d=
a[c];d.callback.call(d.target,b)}};q.triggerPage=function(a,b,c,d,e,f){var g={name:a,runtime:l.runtime},m=u.getInstance();"onpage"===a?(g.page=d,g.url=b,g.setting=c,"function"==typeof m.onpage?m.onpage.call(m,g):g.page(c)):(d=q.getTriggers(a),"onpagechange"===a?(g.accept=e,g.ignore=f,g.url=b,d.length?q.triggerPageChange(d,g,e):e()):("onpageprogress"===a?(g.total=l.progress.total,g.loaded=l.progress.loaded,g.percent=l.progress.percent):"onpagedestroy"===a?(g.url=b,g.setting=c):g.url=b,q.trigger(d,
g)))};q.triggerPageChange=function(a,b,c){var d=a.shift();b.accept=function(){a.length?q.triggerPageChange(a,b,c):c()};d.callback.call(d.target,b)};q.triggerProject=function(a,b){b={name:a,runtime:l.runtime,projectName:b};var c=[];q.createTrigger(a,c,u.getInstance());q.trigger(c,b)};q.triggerReady=function(a,b){var c={name:a,runtime:l.runtime,project:b},d=[];q.createTrigger(a,d,u.getInstance());"onreadied"==a&&q.createTrigger(a,d,b);q.trigger(d,c)};q.triggerInclude=function(a,b){b={name:a,runtime:l.runtime,
include:b};var c=[];q.createTrigger(a,c,u.getInstance());q.trigger(c,b)};q.triggerExecute=function(a,b,c,d,e,f,g){f=q.getExecuteRenderTriggers(a,b,d,f);if(f.length){var m=h.structs[b.index];q.triggerExecuteState(f,{name:a,runtime:l.runtime,project:b,args:d,state:m.executeState,version:m.executeVersion,start:function(){0!==m.executeState&&(m.executeState=1,m.executeEventState=1);return m.executeState},pause:function(){0!==m.executeState&&(m.executeState=2,m.executeEventState=1);return m.executeState},
stop:function(){0!==m.executeState&&(m.executeState=0,m.executeEventState=1);return m.executeState}},b,c,d,e,g)}else"function"==typeof g&&g()};q.triggerExecuteState=function(a,b,c,d,e,f,g){var m=a.shift();m.callback.call(m.target,b);h.executeState(c,d,e,f,function(){a.length?q.triggerExecuteState(a,b,c,d,e,f,g):"function"==typeof g&&g()})};q.triggerRender=function(a,b,c,d,e,f,g,m,t){m=q.getExecuteRenderTriggers(a,b,d,m);if(m.length){var v=h.structs[b.index],y={name:a,runtime:l.runtime,project:b,args:d,
state:v.renderState,version:v.renderVersion,start:function(){0!==v.renderState&&(v.renderState=1,v.renderEventState=1);return v.renderState},pause:function(){0!==v.renderState&&(v.renderState=2,v.renderEventState=1);return v.renderState},stop:function(){0!==v.renderState&&(v.renderState=0,v.renderEventState=1);return v.renderState}};"onrenderlistener"==a&&(y.abstractNodeTree=f,y.event=g);q.triggerRenderState(m,y,b,c,d,e,t)}else"function"==typeof t&&t()};q.triggerRenderState=function(a,b,c,d,e,f,g){var m=
a.shift();m.callback.call(m.target,b);h.renderState(c,d,e,f,function(){a.length?q.triggerRenderState(a,b,c,d,e,f,g):"function"==typeof g&&g()})};q.triggerUrl=function(a,b){b={name:a,runtime:l.runtime,url:b};a=q.getTriggers(a);q.trigger(a,b)};q.triggerNative=function(a,b){a=q.getTriggers(a);q.trigger(a,b)};N.list=[];N.intervalId=void 0;N.interval=function(){"undefined"==typeof N.intervalId&&(N.intervalId=setInterval(function(){for(;N.list.length;){var a=N.list.shift();try{a()}catch(b){console.error(b)}}},
0))};da.prototype={constructor:da,start:function(){z.start(this);return this},stop:function(){z.stop(this);return this},status:function(){return z.status(this)}};z.timers={};z.autoIncrement=0;z.createIndex=function(){var a=z.autoIncrement;z.autoIncrement++;return a};z.intervalId=void 0;z.interval=function(){"undefined"==typeof z.intervalId&&(z.intervalId=setInterval(function(){var a=[],b;for(b in z.timers){var c=z.timers[b];if(!c.executing){var d=Date.now();d-c.origin>=c.timeout&&(c.origin=d,c.executing=
!0,function(e){N(function(){"function"==typeof e.callback&&e.callback.call(e);e.executing=!1})}(c),c.executed++,0<c.limit&&c.limit>=c.executed&&a.push(c.index))}}for(b=0;b<a.length;b++)delete z.timers[a[b]]},0))};z.start=function(a){if(z.status(a))return!0;a.origin=Date.now();a.executing=!1;z.timers[a.index]=a;z.interval()};z.stop=function(a){if(!z.status(a))return!0;delete z.timers[a.index];return!0};z.status=function(a){return"undefined"==typeof z.timers[a.index]||z.timers[a.index].runtime!=a.runtime?
!1:!0};z.clear=function(){z.autoIncrement=0;var a={},b;for(b in z.timers){var c=z.timers[b];c.global&&(c.index=z.createIndex(),c.runtime=l.runtime,a[c.index]=c)}z.timers=a};l.before=function(a,b){l.makeProgress(1);l.clearEvent();"function"==typeof u.getInstance().onpage?q.triggerPage("onpage",b,a,function(c){"undefined"==typeof c&&(c=u.router.matchPage(b));l.load(c,b)}):("undefined"==typeof a&&(a=u.router.matchPage(b)),l.load(a,b))};l.load=function(a,b){if(!a||"object"!=typeof a||"string"!=typeof a.name&&
"number"!=typeof a.name)return l.triggerError("load",w.content("page-0001",b.toString())),q.triggerPage("onpagenotfound",b),l.after(),!1;l.makeProgress(2);if(!a.src||"object"!=typeof a.src&&"string"!=typeof a.src||"string"==typeof a.src&&""==a.src||"object"==typeof a.src&&a.src.constructor!=S)return l.execute(a.name,b);var c=h.createInclude(a.src,h.option.js);if(!c)return l.triggerError("load",w.content("page-0003",a.name)),!1;var d=function(f){if(l.firstStatus)return l.triggerWarning("load",w.content("page-0005",
ia)),c.option&=~h.option.execute,l(a),!1;l.triggerError("load",w.content("page-0004",a.name,a.src));q.triggerPage("onpagenotfound",b);l.after()},e=function(f){return l.execute(a.name,b)};if(c.isExecute()){if("undefined"==typeof c.result){c.wait.push({resultArgument:!0,project:void 0,oncallback:void 0,onsuccess:e,onerror:d});return}if(!c.isError())return l.execute(a.name,b)}c.option|=h.option.execute;c.execute(e,d)};l.execute=function(a,b){if("undefined"==typeof h.projects[a])return l.triggerError("execute",
w.content("page-0002",a)),q.triggerPage("onpagenotfound",b),l.after(),!1;l.makeProgress(3);l.collectProgress();l.project=h.projects[a];l.url=b;h.preparing(function(){l.project.use(!0);return h.execute(l.project,void 0,function(){l.after()})})};l.after=function(){l.makeProgress(9);q.triggerPage("onpaged",l.url);l.makeProgress(10);l.project?x(l.url.toString(),!0):x.clear();l.status=!0;q.deployListener()};l.events={};l.createEventIndex=function(a){return a.name+" "+a.index};l.isEventName=function(a){return 0!==
a.indexOf("on")?!1:0>",oninclude,onincluded,onproject,onprojected,onpage,onpagenotfound,onpageprogress,onready,onreadied,onexecute,onexecuted,onexecutestart,onexecutepause,onexecutestop,onrender,onrendered,onrenderstart,onrenderpause,onrenderstop,onrenderlistener,".indexOf(","+a+",")?!0:!1};l.setEvent=function(a,b){var c=l.createEventIndex(a),d=!1;if("boolean"==typeof b)for(var e in a){if(l.isEventName(e))if(b){if("function"==typeof a[e]||"undefined"!=typeof a.extend[e])"object"!=typeof l.events[e]&&
(l.events[e]={}),"undefined"==typeof l.events[e][c]&&(d=!0,l.events[e][c]=a)}else l.events[e]&&"undefined"!=typeof l.events[e][c]&&(d=!0,delete l.events[e][c])}else if(b&&"object"==typeof b)for(e in b)if(l.isEventName(e))if(b[e]){if("function"==typeof a[e]||"undefined"!=typeof a.extend[e])"object"!=typeof l.events[e]&&(l.events[e]={}),"undefined"==typeof l.events[e][c]&&(d=!0,l.events[e][c]=a)}else l.events[e]&&"undefined"!=typeof l.events[e][c]&&(d=!0,delete l.events[e][c]);d&&q.deployListener()};
l.clearEvent=function(){l.events={}};l.getEventNotCurrentProjects=function(a){var b=[];if("undefined"!=typeof l.events[a])for(var c in l.events[a])!l.isCurrentProject(l.events[a][c])&&h.status(l.events[a][c])&&b.push(l.events[a][c]);return b};l.isCurrentProjectEvent=function(a){return l.project&&"undefined"!=typeof l.events[a]&&"undefined"!=typeof l.events[a][l.createEventIndex(l.project)]&&h.status(l.project)?!0:!1};l.isCurrentProject=function(a){return l.project&&l.project.index==a.index&&h.status(a)?
!0:!1};l.runtime=0;l.firstStatus=!1;l.project=void 0;l.url=void 0;l.status=!1;l.progress={total:10,loaded:0,percent:0,step:0,complete:0,length:0,includes:{},projects:{}};l.collectProgress=function(a){if(3==l.progress.step){a=a?[a]:h.prepares;for(var b in a){var c=a[b];if("undefined"==typeof l.progress.projects[c.index]){"undefined"!=typeof h.prepares[c.index]&&(l.progress.projects[c.index]=c,l.progress.length++);c=h.structs[c.index];for(var d in c.include){var e=c.include[d].source;e.isAsync()||e.isExecute()||
"undefined"!=typeof l.progress.includes[e.index]||(l.progress.length++,l.progress.includes[e.index]=e)}}}}};l.completeProgress=function(a){if(a.constructor==ea){if("undefined"==typeof l.progress.includes[a.index])return}else if(a.constructor==aa&&"undefined"==typeof l.progress.projects[a.index])return;l.progress.complete++;l.makeProgress(0)};l.makeProgress=function(a){if(0<a){l.progress.step=a;if(1==a||4==a)l.progress.complete=0,l.progress.length=0,l.progress.includes={},l.progress.projects={};l.progress.loaded=
3>=a?2*a/l.progress.total:(2*a+80)/l.progress.total}if(3==l.progress.step&&0<l.progress.length){a=l.progress.loaded;var b=6/l.progress.total+80/l.progress.length*l.progress.complete/l.progress.total;l.progress.loaded=a>b?a:b}a=l.progress.percent;l.progress.percent=Math.floor(l.progress.loaded/l.progress.total*100);a<l.progress.percent&&q.triggerPage("onpageprogress")};l.triggerError=function(a,b){"undefined"==typeof b&&(b="");a="Webpanda PageError:\n\n\u250d---------------------------------------------\u2511\n\n["+
a+"] "+("undefined"==typeof b.stack?b:b.stack)+"\n\n\u2515---------------------------------------------\u2519\n";console.error(a);u.error(a)};l.triggerWarning=function(a,b){"undefined"==typeof b&&(b="");a="Webpanda PageWarning:\n\n\u250d---------------------------------------------\u2511\n\n["+a+"] "+("undefined"==typeof b.stack?b:b.stack)+"\n\n\u2515---------------------------------------------\u2519\n";console.warn(a);u.warning(a)};ea.prototype={constructor:ea,isAsync:function(){return!!(this.option&
h.option.async)},isExecute:function(){return!!(this.option&h.option.execute)},isError:function(){return!!(this.option&h.option.error)},isRequire:function(){return this.handle.constructor==Y?!0:!1},isAjax:function(){return this.handle.constructor==Z?!0:!1},execute:function(a,b){var c=this;c.handle.onsuccess=function(e){c.result="undefined"!=typeof e?e:!0;q.triggerInclude("onincluded",c);l.completeProgress(c);for(a(e);c.wait.length;){var f=c.wait.shift();if("function"==typeof f.onsuccess)if(f.resultArgument)f.onsuccess(e);
else f.onsuccess.call(f.project,c);if("function"==typeof f.oncallback)if(f.resultArgument)f.oncallback(e);else f.oncallback.call(f.project,c)}};c.handle.onerror=function(e){c.result="undefined"!=typeof e?e:!0;c.option|=h.option.error;if(c.isAjax())var f=w.content("project-0003","Ajax",c.handle.url.toString());else c.isRequire()?(c.handle.remove(),f="string"==typeof e&&"selector"==e?w.content("project-0001","Require",c.handle.url.toString(),P(this.selector)||ba(this.selector)?this.selector:"("+typeof this.selector+
")"):w.content("project-0003","Require",c.handle.url.toString())):f=e;h.triggerError("include",f);q.triggerInclude("onincluded",c);l.completeProgress(c);for(b(e);c.wait.length;){f=c.wait.shift();if("function"==typeof f.onerror)if(f.resultArgument)f.onerror(e);else f.onerror.call(f.project,c);if("function"==typeof f.oncallback)if(f.resultArgument)f.oncallback(e);else f.oncallback.call(f.project,c)}};c.handle.url.query.__v=u.version;if(u.include.isDisableCache()){var d=new Date;d=[d.getFullYear(),d.getMonth()+
1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()];c.handle.url.query.__t=d.join(".")}"function"==typeof u.include.oncallback&&u.include.oncallback.call(u.getInstance(),c);c.isRequire()?(q.triggerInclude("oninclude",c),c.handle.selector=u.include.selector,"append"==u.include.method?c.handle.append():"prepend"==u.include.method?c.handle.prepend():(d=w.content("project-0002","Require",c.handle.url.toString(),u.include.method),h.triggerError("include",d))):c.isAjax()&&(q.triggerInclude("oninclude",
c),c.handle.request())}};aa.prototype={constructor:aa};h.option=function(){var a={};Object.defineProperties(a,{project:{value:1,writable:!1,enumerable:!0,configurable:!1},include:{value:2,writable:!1,enumerable:!0,configurable:!1},readyState:{value:4,writable:!1,enumerable:!0,configurable:!1},async:{value:8,writable:!1,enumerable:!0,configurable:!1},css:{value:16,writable:!1,enumerable:!0,configurable:!1},js:{value:32,writable:!1,enumerable:!0,configurable:!1},json:{value:64,writable:!1,enumerable:!0,
configurable:!1},text:{value:128,writable:!1,enumerable:!0,configurable:!1},error:{value:256,writable:!1,enumerable:!0,configurable:!1},execute:{value:512,writable:!1,enumerable:!0,configurable:!1},refresh:{value:1024,writable:!1,enumerable:!0,configurable:!1},reload:{value:2048,writable:!1,enumerable:!0,configurable:!1},alone:{value:4096,writable:!1,enumerable:!0,configurable:!1},overrideEvent:{value:8192,writable:!1,enumerable:!0,configurable:!1},disableSelector:{value:16384,writable:!1,enumerable:!0,
configurable:!1},disableTemplate:{value:32768,writable:!1,enumerable:!0,configurable:!1},disableEvent:{value:65536,writable:!1,enumerable:!0,configurable:!1},disablePrototype:{value:131072,writable:!1,enumerable:!0,configurable:!1},disableData:{value:262144,writable:!1,enumerable:!0,configurable:!1},disableInclude:{value:524288,writable:!1,enumerable:!0,configurable:!1},disableFriend:{value:1048576,writable:!1,enumerable:!0,configurable:!1},onlySelector:{value:2064384,writable:!1,enumerable:!0,configurable:!1},
onlyTemplate:{value:2048E3,writable:!1,enumerable:!0,configurable:!1},onlyEvent:{value:2015232,writable:!1,enumerable:!0,configurable:!1},onlyPrototype:{value:1949696,writable:!1,enumerable:!0,configurable:!1},onlyData:{value:1818624,writable:!1,enumerable:!0,configurable:!1},onlyInclude:{value:1556480,writable:!1,enumerable:!0,configurable:!1},onlyFriend:{value:1032192,writable:!1,enumerable:!0,configurable:!1},page:{value:2097152,writable:!1,enumerable:!0,configurable:!1}});return a}();Object.preventExtensions(h.option);
h.find=function(a,b,c){if("number"==typeof b){if(a=h.projects[a],b&h.option.readyState)return a?h.structs[a.index].readyState:-1}else{if("function"==typeof b){if("string"!=typeof a&&"number"!=typeof a)return-1;h.wait(a,b,c);return(b=h.projects[a])?h.structs[b.index].readyState:-1}if("string"==typeof a||"number"==typeof a){if(h.projects[a])return h.projects[a]}else if(l.project&&h.status(l.project))return l.project}};h.autoIncrement={project:0,include:0};h.includes={};h.projects={};h.structs={};h.prepares=
{};h.status=function(a){a=a.index;return"undefined"==typeof a||"undefined"==typeof h.structs[a]?!1:!0};h.wait=function(a,b,c){c&&"object"==typeof c||(c={});var d=!!c.global,e=z(function(){var g=h.projects[a];if(g){var m=h.structs[g.index];if(1===m.readyState)return this.stop(),b.call(g),!0;0===m.readyState&&h.ready(g)}},0,0,d).start();if(K(c.timeout)){var f="function"==typeof c.oncallback?c.oncallback:void 0;z(function(){if(!e.status())return!1;e.stop();f&&f()},c.timeout,1,d).start()}};h.compiler=
function(a,b){var c=h.structs[a.index];if("undefined"!=typeof b)return b&&"object"==typeof b&&b.constructor==R&&(c.template=b.template,c.compiler&&"object"==typeof c.compiler&&k.remove(c.compiler),b.debug=w.content("project-0008",a.name),c.compiler=b),a;c.compiler&&"object"==typeof c.compiler||(c.compiler=new R({template:c.template,debug:w.content("project-0008",a.name)}));return c.compiler};h.template=function(a,b){var c=h.structs[a.index];return"undefined"!=typeof b?("number"==typeof b&&(b=String(b)),
"string"==typeof b&&(c.template=b,c.compiler&&"object"==typeof c.compiler&&c.compiler.template!=b&&(c.compiler.template=b,c.compiler.reparse())),a):c.template};h.selector=function(a,b){var c=h.structs[a.index];if("undefined"!=typeof b)return c.selector=b,h.renderSelectorCreate(c,a,b),a;if(c.renderSelector)return c.renderSelector;if(c.compiler)return c.compiler.node};h.include=function(a,b){var c=[];h.createStructInclude(b,a,function(d){c.push(d)});if(!c.length)return!1;h.readyInclude(c,0,function(){for(var d in c)h.readyIncludeResult(c[d],
a)});return!0};h.html=function(a){var b="";a=h.structs[a.index];if(!(a.compiler&&a.compiler.status&&a.compiler.abstractNodeTree&&a.compiler.abstractNodeTree.length))return b;a=k.queryValidAbstractNodeTrees(a.compiler.abstractNodeTree);for(var c in a)a[c].node&&a[c].node.parentNode&&(b=a[c].isTagComment()?b+("\x3c!--"+a[c].node.nodeValue+"--\x3e"):a[c].isTagText()?b+a[c].node.nodeValue:b+a[c].node.outerHTML);return b};h.text=function(a){var b="";a=h.structs[a.index];if(!(a.compiler&&a.compiler.status&&
a.compiler.abstractNodeTree&&a.compiler.abstractNodeTree.length))return b;a=k.queryValidAbstractNodeTrees(a.compiler.abstractNodeTree);for(var c in a)a[c].node&&a[c].node.parentNode&&!a[c].isTagComment()&&(a[c].isTagText()?b+=a[c].node.nodeValue:"undefined"!=typeof a[c].node.innerText?b+=a[c].node.innerText:"undefined"!=typeof a[c].node.textContent&&(b+=a[c].node.textContent));return b};h.remove=function(a){var b=a.index,c=h.structs[b];if(c){if(c.compiler&&c.compiler.abstractNodeTree)for(var d in c.compiler.abstractNodeTree)c.compiler.abstractNodeTree[d].remove();
k.listenerRemove(a.data);a.use(!1);if(a.children&&"object"==typeof a.children)for(d in a.children)"undefined"!=typeof a.children[d].parent[b]&&delete a.children[d].parent[b];if(a.parent&&"object"==typeof a.parent)for(d in a.parent)"undefined"!=typeof a.parent[d].children[b]&&delete a.parent[d].children[b];"undefined"!=typeof h.projects[a.name]&&delete h.projects[a.name];delete h.structs[b]}};h.initialize=function(a,b){this.index=h.createIndex(h.option.project);this.name=a;this.parent={};this.children=
{};this.extend={};this.prototype=b;this.data={};this.debug=function(){console.log(h.structs[this.index]);return this};this.ready=function(e,f){var g=h.structs[this.index];"function"==typeof e?h.wait(this.name,e,f):0==g.readyState&&h.ready(this);return g.readyState};this.clone=function(e){return h.clone(this,e)};var c=this;this.clone.data=function(e,f){e=I(e);if("string"==typeof f||"number"==typeof f)c.data[f]=e;else if(e&&"object"==typeof e)for(var g in e)c.data[g]=e[g];return e};this.clone.prototype=
function(e,f){e=I(e);if("string"==typeof f||"number"==typeof f)c.prototype[f]=e;else if(e&&"object"==typeof e)for(var g in e)c.prototype[g]=e[g];return e};this.friend=function(){return h.structs[this.index].friend};this.compiler=function(e){return h.compiler(this,e)};this.template=function(e){return h.template(this,e)};this.selector=function(e){return h.selector(this,e)};this.use=function(e){"undefined"==typeof e&&(e=!0);l.setEvent(this,e);return this};this.page=function(){l({name:this.name});return this};
this.execute=function(e){D(e)?"undefined"==typeof e.option&&(e.option=0):e={option:0,selector:void 0};h.execute(this,e);return this};this.render=function(e){D(e)?"undefined"==typeof e.option&&(e.option=0):e={option:0,selector:void 0};h.render(this,e);return this};this.start=function(){var e=h.structs[this.index];0!==e.executeState&&(e.executeState=1,e.executeEventState=1);0!==e.renderState&&(e.renderState=1,e.renderEventState=1);return this};this.pause=function(){var e=h.structs[this.index];0!==e.executeState&&
(e.executeState=2,e.executeEventState=1);0!==e.renderState&&(e.renderState=2,e.renderEventState=1);return this};this.stop=function(){var e=h.structs[this.index];0!==e.executeState&&(e.executeState=0,e.executeEventState=1);0!==e.renderState&&(e.renderState=0,e.renderEventState=1);return this};this.html=function(){return h.html(this)};this.text=function(){return h.text(this)};this.remove=function(){h.remove(this);return Object.keys(h.projects).length};this.onrenderlistener=this.onrenderstop=this.onrenderpause=
this.onrenderstart=this.onrendered=this.onrender=this.onexecutestop=this.onexecutepause=this.onexecutestart=this.onexecuted=this.onexecute=this.onurlchange=this.onpagedestroy=this.onpagechange=this.onpaged=this.onreadied=null;for(var d in q.native)this[d]=null;Object.preventExtensions(this)};h.create=function(a,b){try{q.triggerProject("onproject",a);var c=new aa;h.projects[a]=Object.create(c);var d=h.projects[a];h.initialize.call(d,a,c);h.createStruct(d,b);h.createEvent(d,b);h.prepares[d.index]=d;
h.structs[d.index].readyState=0;l.collectProgress(d);q.triggerProject("onprojected",a)}catch(e){h.triggerError("create",e)}};h.createIndex=function(a){var b=0;a&h.option.project?(b=h.autoIncrement.project,h.autoIncrement.project++):a&h.option.include&&(b=h.autoIncrement.include,h.autoIncrement.include++);return b};h.createName=function(){for(var a;;){a=(new Date).valueOf().toString();for(var b=0;23>b;b++)a+="ABCDEFGHIJKLMNOPQRSTVUWXYZabcdefghijklmnopqrstvuwxyz1234567890".charAt(Math.floor(62*Math.random()));
if("undefined"==typeof h.projects[a])break}return a};h.createStruct=function(a,b){h.structs[a.index]={struct:b,compiler:void 0,selector:"undefined"!=typeof b.selector?b.selector:void 0,include:[],includeState:0,extend:[],extendState:0,extended:[],template:"",templateState:0,templateDefine:void 0,friend:[],data:"undefined"!=typeof b.data?b.data:void 0,prototype:"undefined"!=typeof b.prototype?b.prototype:void 0,renderSelector:null,renderVersion:0,renderState:1,renderTimer:void 0,renderEventState:0,
executeState:1,executeTimer:void 0,executeVersion:0,executeEventState:0,readyState:3,readyWait:[],readyExtendWaitSign:{},readyExtendWaitSignStatus:function(c){for(var d=[{index:a.index,sign:this.readyExtendWaitSign}],e={};d.length;){var f=d.pop();if("undefined"==typeof e[f.index]){e[f.index]=f;if("undefined"!=typeof f.sign[c])return!0;for(var g in f.sign)d.push({index:g,sign:f.sign[g].readyExtendWaitSign})}}return!1}};h.createStructFriend(b.friend,a);h.createStructInclude(b.include,a,function(c){h.structs[a.index].include.push(c)});
h.createStructExtend(b.extend,a);h.createStructTemplate(b.template,a)};h.createStructFriend=function(a,b){var c=[];"function"==typeof a?a.call(c,b):c=a;"string"==typeof c&&(c=[c]);if(O(c))for(var d in c)("string"==typeof c[d]||"number"==typeof c[d])&&0>h.structs[b.index].friend.indexOf(c[d])&&h.structs[b.index].friend.push(c[d])};h.createStructInclude=function(a,b,c){var d=[];"function"==typeof a?a.call(d,b):d=a;if("string"==typeof d||D(d))d=[d];if(O(d))for(var e in d){var f=0;var g=a=void 0,m=void 0,
t=void 0;"string"==typeof d[e]||"object"==typeof d[e]&&d[e].constructor==S?t=d[e]:D(d[e])&&"undefined"!=typeof d[e].src&&("string"==typeof d[e].src||"object"==typeof d[e].src&&d[e].src.constructor==S?t=d[e].src:"function"==typeof d[e].src&&(t=d[e].src(b)),K(d[e].option)&&(f=parseInt(d[e].option)),"function"==typeof d[e].oncallback&&(a=d[e].oncallback),"function"==typeof d[e].onsuccess&&(g=d[e].onsuccess),"function"==typeof d[e].onerror&&(m=d[e].onerror));(f=h.createInclude(t,f))&&c({source:f,ready:!1,
template:!1,oncallback:a,onsuccess:g,onerror:m})}};h.createStructExtend=function(a,b){var c=[];"function"==typeof a?a.call(c,b):c=a;if("string"==typeof c||D(c))c=[c];if(O(c))for(var d in c){a="";var e=void 0,f=0;if("string"==typeof c[d]){if(a=c[d],""==a)continue}else if(D(c[d])&&("string"==typeof c[d].name||"number"==typeof c[d].name)){a=c[d].name;if(""==a)continue;"undefined"!=typeof c[d].src&&h.createStructInclude({src:c[d].src,option:h.option.js},b,function(g){h.structs[b.index].include.push(g)});
K(c[d].option)&&(f=parseInt(c[d].option));"string"==typeof c[d].use&&""!=c[d].use&&(e=c[d].use)}h.structs[b.index].extend.push({name:a,use:e,option:f})}};h.createStructTemplate=function(a,b){var c=void 0;if("function"==typeof a){var d=[];a.call(d,b);d.length&&(c=d.pop())}else c=a;"string"==typeof c?(h.structs[b.index].templateState=1,h.structs[b.index].template=c,h.structs[b.index].templateDefine=c):D(c)&&(h.structs[b.index].templateState=1,"undefined"!=typeof c.src&&h.createStructInclude({src:c.src,
option:h.option.text},b,function(e){var f=b.index;e.template=!0;e.onsuccess=function(g){var m=h.structs[this.index];m&&(this.index!==f&&0!==m.templateState||this.template(g.result.data))};h.structs[b.index].include.push(e)}))};h.createInclude=function(a,b){if("object"!=typeof a||a.constructor!=S)if("string"==typeof a||"number"==typeof a)a=r(a);else return;if(b&h.option.js)var c=h.option.js;else if(b&h.option.css)c=h.option.css;else if(b&h.option.json)c=h.option.json;else if(b&h.option.text)c=h.option.text;
else{c="";var d=a.toString(r.option.path);""!=d&&(c=C(d.split(".").pop().toLowerCase()));"js"==c?(b|=h.option.js,c=h.option.js):"css"==c?(b|=h.option.css,c=h.option.css):"json"==c?(b|=h.option.json,c=h.option.json):(b|=h.option.text,c=h.option.text)}"undefined"==typeof h.includes[c]&&(h.includes[c]={});d=a.toString(r.option.all&~r.option.hash);"undefined"==typeof h.includes[c][d]&&(h.includes[c][d]=new ea(d,a,b));return h.includes[c][d]};h.createEvent=function(a,b){if(b)for(var c in b)0===c.indexOf("on")&&
"undefined"!=typeof a[c]&&(a[c]=b[c])};h.clone=function(a,b){"string"!=typeof b&&"number"!=typeof b&&(b=h.createName());if("undefined"!=typeof h.projects[b])return!1;var c=I(h.structs[a.index].struct);c.name=b;h.create(b,c);b=h.projects[b];h.ready(b);h.cloneBasics(a,b);return b};h.cloneBasics=function(a,b){for(var c in a)0===c.indexOf("on")&&(b[c]=a[c]);for(c in a.data)"function"!=typeof a.data[c]&&(b.data[c]=I(a.data[c]));for(c in a.prototype)if("function"!=typeof a.prototype[c]||"function"!=typeof b[c])b.prototype[c]=
I(a.prototype[c]);a=h.structs[a.index];b=h.structs[b.index];b.selector=a.selector;b.template=a.template};h.preparing=function(a){for(var b in h.prepares)return h.ready(h.prepares[b],function(){h.preparing(a)});return a?a():void 0};h.ready=function(a,b){var c=h.structs[a.index];if(1===c.readyState)return b?b():void 0;if(2===c.readyState)return!1;c.readyState=2;"undefined"!=typeof h.prepares[a.index]&&delete h.prepares[a.index];q.triggerReady("onready",a);h.readyStart(a,function(){l.completeProgress(a);
c.readyState=1;for(q.triggerReady("onreadied",a);c.readyWait.length;)c.readyWait.shift()();return b?b():void 0})};h.readyStart=function(a,b){var c=h.structs[a.index];if(2===c.readyState){if(c.include.length&&0===c.includeState)return h.readyInclude(c.include,0,function(){c.includeState=1;return h.readyStart(a,b)});if(c.extend.length){if(0===c.extendState)return h.readyExtend(a,c.extend,0,function(){c.extendState=1;return h.readyStart(a,b)});h.readyExtendStart(c,a)}h.readyPrototype(c,a);h.readyData(c,
a);var d=[],e;for(e in c.include)c.include[e].template?d.push(c.include[e]):h.readyIncludeResult(c.include[e],a);if(d.length)for(e=d.length-1;0<=e;e--)h.readyIncludeResult(d[e],a);return b?b():void 0}};h.readyInclude=function(a,b,c){if("undefined"==typeof a[b])return c();var d=a[b],e=function(){h.readyInclude(a,b+1,c)};if(!d.source.isExecute()){d.source.option|=h.option.execute;if(!d.source.isAsync())return h.readyIncludeExecute(d,e);h.readyIncludeExecute(d);return e()}if("undefined"==typeof d.source.result)d.source.wait.push({resultArgument:!0,
project:void 0,oncallback:e,onsuccess:void 0,onerror:void 0});else return e()};h.readyIncludeExecute=function(a,b){return a.source.execute(function(c){if(!a.source.isAsync())return b()},function(c){if(!a.source.isAsync())return b()})};h.readyIncludeResult=function(a,b){if(!a.ready){a.ready=!0;var c="function"==typeof a.oncallback,d="function"==typeof a.onsuccess,e="function"==typeof a.onerror;"undefined"!=typeof a.source.result?(a.source.isError()?e&&a.onerror.call(b,a.source):d&&a.onsuccess.call(b,
a.source),c&&a.oncallback.call(b,a.source)):(c||d||e)&&a.source.wait.push({resultArgument:!1,project:b,oncallback:a.oncallback,onsuccess:a.onsuccess,onerror:a.onerror})}};h.readyExtend=function(a,b,c,d){if("undefined"==typeof b[c])return d();var e=h.projects[b[c].name];if("undefined"==typeof e)return h.triggerWarning("extend",w.content("project-0007",a.name,b[c].name)),h.readyExtend(a,b,c+1,d);var f=h.structs[e.index],g=h.structs[a.index];g.readyExtendWaitSign[e.index]=f;var m=function(){delete g.readyExtendWaitSign[e.index];
return h.readyExtend(a,b,c+1,d)};if(2===f.readyState){if(f.readyExtendWaitSignStatus(a.index))return m();f.readyWait.push(function(){return m()})}else return 1===f.readyState?m():h.ready(e,m)};h.readyExtendStart=function(a,b){for(var c=void 0,d=void 0,e=0;e<a.extend.length;e++){var f=h.projects[a.extend[e].name];if("undefined"==typeof f)h.triggerWarning("extend",w.content("project-0007",b.name,a.extend[e].name));else{var g=h.structs[f.index];if(g){"undefined"!=typeof f.parent[b.index]&&h.triggerError("ready",
w.content("project-0004",b.name,f.name));for(var m=0;m<g.extended.length;m++){var t=g.extended[m],v=h.projects[t.name],y=h.structs[t.index];v&&y&&("undefined"!=typeof v.parent[b.index]&&h.triggerError("ready",w.content("project-0004",b.name,v.name)),b.parent[v.index]=v,v.children[b.index]=b,h.readyExtendPrototype(t,y,b),h.readyExtendData(t,y,b),t.option&h.option.disableSelector||"undefined"==typeof y.selector||(c=y.selector),t.option&h.option.disableTemplate||"string"!=typeof y.templateDefine||(d=
y.templateDefine))}b.parent[f.index]=f;f.children[b.index]=b;h.readyExtendEvent(a.extend[e],f,b);h.readyExtendInclude(a.extend[e],g,a);h.readyExtendFriend(a.extend[e],g,a);h.readyExtendPrototype(a.extend[e],g,b);h.readyExtendData(a.extend[e],g,b);a.extend[e].option&h.option.disableSelector||"undefined"==typeof g.selector||(c=g.selector);a.extend[e].option&h.option.disableTemplate||"string"!=typeof g.templateDefine||(d=g.templateDefine);a.extended=a.extended.concat(g.extended);a.extended.push({name:f.name,
index:f.index,use:a.extend[e].use,option:a.extend[e].option})}}}"undefined"==typeof a.selector&&"undefined"!=typeof c&&(a.selector=c);0===a.templateState&&"string"==typeof d&&(a.template=d)};h.readyExtendEvent=function(a,b,c){if(!(a.option&h.option.disableEvent)){for(var d in b.extend)if(!(a.option&h.option.overrideEvent&&"function"==typeof c[d])){"undefined"==typeof c.extend[d]&&(c.extend[d]={});for(var e in b.extend[d])"undefined"==typeof c.extend[d][e]&&(c.extend[d][e]=b.extend[d][e])}for(d in b)0===
d.indexOf("on")&&"function"==typeof b[d]&&(a.option&h.option.overrideEvent?"function"!=typeof c[d]&&(c[d]=b[d]):("undefined"==typeof c.extend[d]&&(c.extend[d]={}),"undefined"==typeof c.extend[d][b.name+" "+b.index]&&(c.extend[d][b.name+" "+b.index]=b[d])))}};h.readyExtendInclude=function(a,b,c){for(var d in b.include){if(b.include[d].template){if(1===c.templateState||a.option&h.option.disableTemplate)continue}else if(a.option&h.option.disableInclude)continue;var e=I(b.include[d]);e.ready=!1;c.include.unshift(e)}};
h.readyExtendFriend=function(a,b,c){if(!(a.option&h.option.disableFriend))for(var d in b.friend)0>c.friend.indexOf(b.friend[d])&&c.friend.push(b.friend[d])};h.readyExtendPrototype=function(a,b,c){if(!(a.option&h.option.disablePrototype))if("string"==typeof a.use?(D(c.prototype[a.use])||(c.prototype[a.use]={}),a=c.prototype[a.use]):a=c.prototype,"function"==typeof b.prototype)b.prototype.call(a,c);else if(D(b.prototype)){b=I(b.prototype);for(var d in b)a[d]=b[d]}};h.readyExtendData=function(a,b,c){if(!(a.option&
h.option.disableData))if("string"==typeof a.use?(D(c.data[a.use])||(c.data[a.use]={}),a=c.data[a.use]):a=c.data,"function"==typeof b.data)b.data.call(a,c);else if(D(b.data)){b=I(b.data);for(var d in b)a[d]=b[d]}};h.readyPrototype=function(a,b){if("function"==typeof a.prototype)a.prototype.call(b.prototype,b);else if(D(a.prototype)){a=I(a.prototype);for(var c in a)b.prototype[c]=a[c]}};h.readyData=function(a,b){if("function"==typeof a.data)a.data.call(b.data,b);else if(D(a.data)){a=I(a.data);for(var c in a)b.data[c]=
a[c]}};h.execute=function(a,b,c){b&&"object"==typeof b?"number"!=typeof b.option&&(b.option=0):b={option:0,selector:void 0};c&&(b.option=b.option|h.option.refresh|h.option.alone|h.option.page,l.makeProgress(4));var d=h.structs[a.index];d.executeVersion++;d.executeState=1;d.executeEventState=0;var e=d.executeVersion;q.triggerExecute("onexecute",a,e,b,c,!1,function(){c&&l.makeProgress(5);q.triggerExecute("onexecute",a,e,b,c,!0,function(){c&&l.makeProgress(6);h.render(a,b,function(){c&&l.makeProgress(7);
h.executeState(a,e,b,c,function(){q.triggerExecute("onexecuted",a,e,b,c,!1,function(){c&&l.makeProgress(8);q.triggerExecute("onexecuted",a,e,b,c,!0,function(){d.executeVersion=0;return c?c():void 0})})})})})})};h.executeState=function(a,b,c,d,e){var f=h.structs[a.index];if(b!=f.executeVersion)return d?d():void 0;if(c.option&h.option.page&&!l.isCurrentProject(a))return!1;if(1==f.executeState)return 1==f.executeEventState&&(f.executeEventState=0,q.triggerExecute("onexecutestart",a,b,c)),e();if(2==f.executeState)1==
f.executeEventState&&(f.executeEventState=0,q.triggerExecute("onexecutepause",a,b,c)),f.executeTimer&&(f.executeTimer.stop(),f.executeTimer=void 0),f.executeTimer=z(function(){if(c.option&h.option.page&&!l.isCurrentProject(a))return f.executeTimer&&(f.executeTimer.stop(),f.executeTimer=void 0),!1;if(2==f.executeState)return 1==f.executeEventState&&(f.executeEventState=0,q.triggerExecute("onexecutepause",a,b,c)),!0;f.executeTimer&&(f.executeTimer.stop(),f.executeTimer=void 0);if(1==f.executeState)return 1==
f.executeEventState&&(f.executeEventState=0,q.triggerExecute("onexecutestart",a,b,c)),e();1==f.executeEventState&&(f.executeEventState=0,q.triggerExecute("onexecutestop",a,b,c));return d?d():void 0},0,0,!0).start();else return 1==f.executeEventState&&(f.executeEventState=0,q.triggerExecute("onexecutestop",a,b,c)),d?d():void 0};h.render=function(a,b,c){var d=h.structs[a.index];d.renderVersion++;d.renderState=1;d.renderEventState=0;var e=d.renderVersion;q.triggerRender("onrender",a,e,b,c,void 0,void 0,
!1,function(){q.triggerRender("onrender",a,e,b,c,void 0,void 0,!0,function(){h.renderStart(a,b);q.triggerRender("onrendered",a,e,b,c,void 0,void 0,!1,function(){q.triggerRender("onrendered",a,e,b,c,void 0,void 0,!0,function(){d.renderVersion=0;return c?c():void 0})})})})};h.renderState=function(a,b,c,d,e){var f=h.structs[a.index];if(b!=f.renderVersion)return d?d():void 0;if(c.option&h.option.page&&!l.isCurrentProject(a))return!1;if(1==f.renderState)return 1==f.renderEventState&&(f.renderEventState=
0,q.triggerRender("onrenderstart",a,b,c)),e();if(2==f.renderState)1==f.renderEventState&&(f.renderEventState=0,q.triggerRender("onrenderpause",a,b,c)),f.renderTimer&&(f.renderTimer.stop(),f.renderTimer=void 0),f.renderTimer=z(function(){if(c.option&h.option.page&&!l.isCurrentProject(a))return f.renderTimer&&(f.renderTimer.stop(),f.renderTimer=void 0),!1;if(2==f.renderState)return 1==f.renderEventState&&(f.renderEventState=0,q.triggerRender("onrenderpause",a,b,c)),!0;f.renderTimer&&(f.renderTimer.stop(),
f.renderTimer=void 0);if(1==f.renderState)return 1==f.renderEventState&&(f.renderEventState=0,q.triggerRender("onrenderstart",a,b,c)),e();1==f.renderEventState&&(f.renderEventState=0,q.triggerRender("onrenderstop",a,b,c));return d?d():void 0},0,0,!0).start();else return 1==f.renderEventState&&(f.renderEventState=0,q.triggerRender("onrenderstop",a,b,c)),d?d():void 0};h.renderStart=function(a,b){var c=h.structs[a.index];h.compiler(a);c.compiler.option&=~k.option.disableRender;b&&"object"==typeof b?
"number"!=typeof b.option&&(b.option=0):b={option:0,selector:void 0};(!c.renderSelector||b.option&h.option.reload)&&h.renderSelectorCreate(c,a,b.selector);h.renderSelectorClear(c,b.option);c.compiler.render({data:a.data,selector:c.renderSelector,option:b.option&h.option.refresh?k.option.refresh:0,debug:w.content("project-0008",a.name),onlistener:function(d){q.triggerRender("onrenderlistener",a,c.renderVersion,b,void 0,this,d)}})};h.renderSelectorClear=function(a,b){var c=a.compiler,d=a.renderSelector;
if("object"!=typeof d||null===d)return!1;if(d.constructor==M){if(d.bind===c)return b&h.option.reload?(c.reparse(),!1):!0;d.bind&&d.bind.status&&d.bind.clear();c&&c.status&&c.clear();d.bind=c;return!1}if("undefined"==typeof d.childNodes||"function"!=typeof d.removeChild)return!1;if(c&&k.queryNodeAbstractNodeTree(d,c.abstractNodeTree))return b&h.option.reload?(c.reparse(),!1):!0;if(b&h.option.alone)for(b=d.childNodes.length-1;0<=b;b--)h.renderSelectorFriend(d.childNodes[b],a.friend)||d.removeChild(d.childNodes[b]);
c&&c.status&&c.clear();return!1};h.renderSelectorFriend=function(a,b){if(!b.length)return!1;for(var c in b){var d=h.projects[b[c]];if(d)var e=h.structs[d.index];if(e&&e.compiler&&k.querySelfAbstractNodeTree(a,e.compiler.abstractNodeTree))return!0}return!1};h.renderSelectorCreate=function(a,b,c){var d=void 0;c&&"undefined"!=typeof c?d=c:a.selector&&"undefined"!=typeof a.selector&&(d=a.selector);"undefined"!=typeof d&&d.constructor==M?a.renderSelector=d:"undefined"!=typeof d&&(a.renderSelector=ja(d),
a.renderSelector||h.triggerWarning("render",w.content("project-0006",b.name,P(d)||ba(d)?d:"("+typeof d+")")))};h.triggerError=function(a,b){"undefined"==typeof b&&(b="");a="Webpanda ProjectError:\n\n\u250d---------------------------------------------\u2511\n\n["+a+"] "+("undefined"==typeof b.stack?b:b.stack)+"\n\n\u2515---------------------------------------------\u2519\n";console.error(a);u.error(a)};h.triggerWarning=function(a,b){"undefined"==typeof b&&(b="");a="Webpanda ProjectWarning:\n\n\u250d---------------------------------------------\u2511\n\n["+
a+"] "+("undefined"==typeof b.stack?b:b.stack)+"\n\n\u2515---------------------------------------------\u2519\n";console.warn(a);u.warning(a)};fa.prototype={constructor:fa};u.option=function(){var a={};Object.defineProperties(a,{hash:{value:1,writable:!1,enumerable:!0,configurable:!1},history:{value:2,writable:!1,enumerable:!0,configurable:!1},caseInsensitive:{value:4,writable:!1,enumerable:!0,configurable:!1},disablePage:{value:8,writable:!1,enumerable:!0,configurable:!1},disableCache:{value:16,
writable:!1,enumerable:!0,configurable:!1}});return a}();Object.preventExtensions(u.option);u.error=function(a){};u.warning=function(a){};u.executed=!1;u.wait=function(a,b){b&&"object"==typeof b||(b={});var c=!!b.global,d=z(function(){if(u.executed)return this.stop(),a(),!0},0,0,c).start();if(K(b.timeout)){var e="function"==typeof b.oncallback?b.oncallback:void 0;z(function(){if(!d.status())return!1;d.stop();e&&e()},b.timeout,1,c).start()}};u.environmentVariable={};u.version="0.0.0";u.getInstance=
function(){return F.webpanda};u.configuration=function(a,b){var c=!1;if("undefined"!=typeof b.env&&D(b.env))for(var d in b.env)u.environmentVariable[d]=b.env[d];for(var e in b)if("constructor"!=e&&"env"!=e)if("version"==e){if(P(b[e])||K(b[e]))u.version=b[e]}else"include"==e?u.include.setting(b[e]):"history"==e?u.history.setting(b[e]):"router"==e?u.router.setting(b[e]):"undefined"!=typeof a[e]&&"undefined"!=typeof b[e]&&(0!==e.indexOf("on")||"function"!=typeof b[e]&&null!==b[e]?a[e]=b[e]:(a[e]=b[e],
c=!0));c&&q.deployListener()};u.include={option:0,selector:"head",method:"append",oncallback:void 0,isDisableCache:function(){return!!(u.include.option&u.option.disableCache)},setting:function(a){if(a&&"object"==typeof a){var b=u.include,c;for(c in a)"option"===c?K(a[c])&&(b[c]=parseInt(a[c])):"selector"===c||"method"===c?P(a[c])&&(b[c]=a[c]):"oncallback"===c&&(b[c]=a[c])}}};u.history={pageMaximum:10,stepMaximum:10,setting:function(a){if(a&&"object"==typeof a){var b=u.history,c;for(c in a)("pageMaximum"===
c||"stepMaximum"===c)&&K(a[c])&&(b[c]=a[c])}}};u.router={isModeHistory:function(){return!!(this.option&u.option.history)},isModeHash:function(){return!!(this.option&u.option.hash)},isCaseInsensitive:function(){return!!(this.option&u.option.caseInsensitive)},setting:function(a){var b=u.router;K(a.option)&&(b.option=parseInt(a.option));if(O(a.page))for(var c in a.page)b.setPage(a.page[c])},isDisablePage:function(){return!!(u.router.option&u.option.disablePage)},option:0,page:{},setPage:function(a){var b=
"",c={name:"",src:"",option:0};if(D(a)){"function"==typeof a.path&&(b=a.path());if("string"==typeof a.path||"number"==typeof a.path)b=r(a.path).toString(r.option.path);if("string"==typeof a.name||"number"==typeof a.name)c.name=String(a.name);K(a.option)&&(c.option=parseInt(a.option));"undefined"!=typeof a.src&&(c.src="function"==typeof a.src?a.src():a.src)}""!=c.name&&"string"==typeof b&&(""!=b&&"/"!=b&&(b="/"+b.replace(/(^\/)|(\/$)/g,"")),u.router.page[b]=c)},matchPage:function(a){u.router.isModeHistory()?
a=a.toString(r.option.path):(a=a.toString(r.option.hashPath),a=a.replace(/^#/g,"/"),a=r(a).toString(r.option.path));""!=a&&"/"!=a&&(a="/"+a.replace(/(^\/)|(\/$)/g,""));if("undefined"!=typeof u.router.page[a])return u.router.page[a];for(var b in u.router.page)if(b.toLowerCase()==a.toLowerCase()&&(u.router.isCaseInsensitive()||u.router.page[b].option&u.option.caseInsensitive))return u.router.page[b]}};ha.prototype={constructor:ha};w.instance=void 0;w.content=function(){if(!arguments.length)return"";
"undefined"==typeof w.instance&&(w.instance=new ha);var a=arguments[0];if("undefined"==typeof w.instance[a])return"";a=w.instance[a];for(var b=1;b<arguments.length;b++)a=a.replace("${"+b+"}",arguments[b]);return a};F.webpanda=new fa})(window,document,"a@apilipala.com","2.3.2");

